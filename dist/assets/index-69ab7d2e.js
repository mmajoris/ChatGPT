import{r as l,q as Nn,s as On,t as T,v as q,x as he,y as Q,z as se,T as j,C as ie,E as Ie,J as Nt,K as xe,L as W,M as oe,N as B,O as Z,V as Me,W as Ye,X as kt,Y as In,Z as Fn,$ as Wn,a0 as Tt,a1 as nt,a2 as jn}from"./ant-3420f2b0.js";import{L as Te,u as Ot,a as It,b as dt,c as Un,B as Hn}from"./rrr-3186920e.js";import{c as ut,l as Ne,v as Ft}from"./utils-4f786868.js";import{Q as ue,P as Gn,H as Vn,A as Wt,I as Bn,a as Kn,S as Jn,G as qn,F as Yn,B as Xn,U as Qn,b as jt,c as Zn,D as ea,d as ta}from"./antico-8a2de743.js";import{r as na,a as aa}from"./md-c1350eba.js";import{R as ra}from"./rm-448cf94a.js";import{S as sa}from"./rsh-f13b142e.js";import{i as ia}from"./editor-f8f0fa77.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Ee={},oa={get exports(){return Ee},set exports(e){Ee=e}},Ve={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var la=l,ca=Symbol.for("react.element"),da=Symbol.for("react.fragment"),ua=Object.prototype.hasOwnProperty,ha=la.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ma={key:!0,ref:!0,__self:!0,__source:!0};function Ut(e,t,n){var r,s={},i=null,c=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(c=t.ref);for(r in t)ua.call(t,r)&&!ma.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:ca,type:e,key:i,ref:c,props:s,_owner:ha.current}}Ve.Fragment=da;Ve.jsx=Ut;Ve.jsxs=Ut;(function(e){e.exports=Ve})(oa);const ee=Ee.Fragment,a=Ee.jsx,h=Ee.jsxs;var at={},Et=Nn;at.createRoot=Et.createRoot,at.hydrateRoot=Et.hydrateRoot;var pa=Object.defineProperty,K=(e,t)=>{for(var n in t)pa(e,n,{get:t[n],enumerable:!0})},fa={};K(fa,{convertFileSrc:()=>ga,invoke:()=>ht,transformCallback:()=>fe});function ya(){return window.crypto.getRandomValues(new Uint32Array(1))[0]}function fe(e,t=!1){let n=ya(),r=`_${n}`;return Object.defineProperty(window,r,{value:s=>(t&&Reflect.deleteProperty(window,r),e==null?void 0:e(s)),writable:!1,configurable:!0}),n}async function ht(e,t={}){return new Promise((n,r)=>{let s=fe(c=>{n(c),Reflect.deleteProperty(window,`_${i}`)},!0),i=fe(c=>{r(c),Reflect.deleteProperty(window,`_${s}`)},!0);window.__TAURI_IPC__({cmd:e,callback:s,error:i,...t})})}function ga(e,t="asset"){let n=encodeURIComponent(e);return navigator.userAgent.includes("Windows")?`https://${t}.localhost/${n}`:`${t}://localhost/${n}`}async function u(e){return ht("tauri",e)}var wa={};K(wa,{getName:()=>Gt,getTauriVersion:()=>ba,getVersion:()=>Ht,hide:()=>va,show:()=>_a});async function Ht(){return u({__tauriModule:"App",message:{cmd:"getAppVersion"}})}async function Gt(){return u({__tauriModule:"App",message:{cmd:"getAppName"}})}async function ba(){return u({__tauriModule:"App",message:{cmd:"getTauriVersion"}})}async function _a(){return u({__tauriModule:"App",message:{cmd:"show"}})}async function va(){return u({__tauriModule:"App",message:{cmd:"hide"}})}var xa={};K(xa,{TauriEvent:()=>Jt,emit:()=>pt,listen:()=>qt,once:()=>Yt});async function Vt(e,t){return u({__tauriModule:"Event",message:{cmd:"unlisten",event:e,eventId:t}})}async function Bt(e,t,n){await u({__tauriModule:"Event",message:{cmd:"emit",event:e,windowLabel:t,payload:n}})}async function mt(e,t,n){return u({__tauriModule:"Event",message:{cmd:"listen",event:e,windowLabel:t,handler:fe(n)}}).then(r=>async()=>Vt(e,r))}async function Kt(e,t,n){return mt(e,t,r=>{n(r),Vt(e,r.id).catch(()=>{})})}var Jt=(e=>(e.WINDOW_RESIZED="tauri://resize",e.WINDOW_MOVED="tauri://move",e.WINDOW_CLOSE_REQUESTED="tauri://close-requested",e.WINDOW_CREATED="tauri://window-created",e.WINDOW_DESTROYED="tauri://destroyed",e.WINDOW_FOCUS="tauri://focus",e.WINDOW_BLUR="tauri://blur",e.WINDOW_SCALE_FACTOR_CHANGED="tauri://scale-change",e.WINDOW_THEME_CHANGED="tauri://theme-changed",e.WINDOW_FILE_DROP="tauri://file-drop",e.WINDOW_FILE_DROP_HOVER="tauri://file-drop-hover",e.WINDOW_FILE_DROP_CANCELLED="tauri://file-drop-cancelled",e.MENU="tauri://menu",e.CHECK_UPDATE="tauri://update",e.UPDATE_AVAILABLE="tauri://update-available",e.INSTALL_UPDATE="tauri://update-install",e.STATUS_UPDATE="tauri://update-status",e.DOWNLOAD_PROGRESS="tauri://update-download-progress",e))(Jt||{});async function qt(e,t){return mt(e,null,t)}async function Yt(e,t){return Kt(e,null,t)}async function pt(e,t){return Bt(e,void 0,t)}var Sa={};K(Sa,{checkUpdate:()=>$a,installUpdate:()=>Pa,onUpdaterEvent:()=>ft});async function ft(e){return qt("tauri://update-status",t=>{e(t==null?void 0:t.payload)})}async function Pa(){let e;function t(){e&&e(),e=void 0}return new Promise((n,r)=>{function s(i){if(i.error)return t(),r(i.error);if(i.status==="DONE")return t(),n()}ft(s).then(i=>{e=i}).catch(i=>{throw t(),i}),pt("tauri://update-install").catch(i=>{throw t(),i})})}async function $a(){let e;function t(){e&&e(),e=void 0}return new Promise((n,r)=>{function s(c){return t(),n({manifest:c,shouldUpdate:!0})}function i(c){if(c.error)return t(),r(c.error);if(c.status==="UPTODATE")return t(),n({shouldUpdate:!1})}Yt("tauri://update-available",c=>{s(c==null?void 0:c.payload)}).catch(c=>{throw t(),c}),ft(i).then(c=>{e=c}).catch(c=>{throw t(),c}),pt("tauri://update").catch(c=>{throw t(),c})})}var Ca={};K(Ca,{CloseRequestedEvent:()=>an,LogicalPosition:()=>Qt,LogicalSize:()=>Xt,PhysicalPosition:()=>We,PhysicalSize:()=>Fe,UserAttentionType:()=>Zt,WebviewWindow:()=>ve,WebviewWindowHandle:()=>tn,WindowManager:()=>nn,appWindow:()=>rt,availableMonitors:()=>Ea,currentMonitor:()=>ka,getAll:()=>en,getCurrent:()=>Ra,primaryMonitor:()=>Ta});var Xt=class{constructor(t,n){this.type="Logical",this.width=t,this.height=n}},Fe=class{constructor(t,n){this.type="Physical",this.width=t,this.height=n}toLogical(t){return new Xt(this.width/t,this.height/t)}},Qt=class{constructor(t,n){this.type="Logical",this.x=t,this.y=n}},We=class{constructor(t,n){this.type="Physical",this.x=t,this.y=n}toLogical(t){return new Qt(this.x/t,this.y/t)}},Zt=(e=>(e[e.Critical=1]="Critical",e[e.Informational=2]="Informational",e))(Zt||{});function Ra(){return new ve(window.__TAURI_METADATA__.__currentWindow.label,{skip:!0})}function en(){return window.__TAURI_METADATA__.__windows.map(e=>new ve(e.label,{skip:!0}))}var At=["tauri://created","tauri://error"],tn=class{constructor(t){this.label=t,this.listeners=Object.create(null)}async listen(t,n){return this._handleTauriEvent(t,n)?Promise.resolve(()=>{let r=this.listeners[t];r.splice(r.indexOf(n),1)}):mt(t,this.label,n)}async once(t,n){return this._handleTauriEvent(t,n)?Promise.resolve(()=>{let r=this.listeners[t];r.splice(r.indexOf(n),1)}):Kt(t,this.label,n)}async emit(t,n){if(At.includes(t)){for(let r of this.listeners[t]||[])r({event:t,id:-1,windowLabel:this.label,payload:n});return Promise.resolve()}return Bt(t,this.label,n)}_handleTauriEvent(t,n){return At.includes(t)?(t in this.listeners?this.listeners[t].push(n):this.listeners[t]=[n],!0):!1}},nn=class extends tn{async scaleFactor(){return u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"scaleFactor"}}}})}async innerPosition(){return u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"innerPosition"}}}}).then(({x:t,y:n})=>new We(t,n))}async outerPosition(){return u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"outerPosition"}}}}).then(({x:t,y:n})=>new We(t,n))}async innerSize(){return u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"innerSize"}}}}).then(({width:t,height:n})=>new Fe(t,n))}async outerSize(){return u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"outerSize"}}}}).then(({width:t,height:n})=>new Fe(t,n))}async isFullscreen(){return u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isFullscreen"}}}})}async isMaximized(){return u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isMaximized"}}}})}async isDecorated(){return u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isDecorated"}}}})}async isResizable(){return u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isResizable"}}}})}async isVisible(){return u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"isVisible"}}}})}async theme(){return u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"theme"}}}})}async center(){return u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"center"}}}})}async requestUserAttention(t){let n=null;return t&&(t===1?n={type:"Critical"}:n={type:"Informational"}),u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"requestUserAttention",payload:n}}}})}async setResizable(t){return u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setResizable",payload:t}}}})}async setTitle(t){return u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setTitle",payload:t}}}})}async maximize(){return u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"maximize"}}}})}async unmaximize(){return u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"unmaximize"}}}})}async toggleMaximize(){return u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"toggleMaximize"}}}})}async minimize(){return u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"minimize"}}}})}async unminimize(){return u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"unminimize"}}}})}async show(){return u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"show"}}}})}async hide(){return u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"hide"}}}})}async close(){return u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"close"}}}})}async setDecorations(t){return u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setDecorations",payload:t}}}})}async setAlwaysOnTop(t){return u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setAlwaysOnTop",payload:t}}}})}async setSize(t){if(!t||t.type!=="Logical"&&t.type!=="Physical")throw new Error("the `size` argument must be either a LogicalSize or a PhysicalSize instance");return u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setSize",payload:{type:t.type,data:{width:t.width,height:t.height}}}}}})}async setMinSize(t){if(t&&t.type!=="Logical"&&t.type!=="Physical")throw new Error("the `size` argument must be either a LogicalSize or a PhysicalSize instance");return u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setMinSize",payload:t?{type:t.type,data:{width:t.width,height:t.height}}:null}}}})}async setMaxSize(t){if(t&&t.type!=="Logical"&&t.type!=="Physical")throw new Error("the `size` argument must be either a LogicalSize or a PhysicalSize instance");return u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setMaxSize",payload:t?{type:t.type,data:{width:t.width,height:t.height}}:null}}}})}async setPosition(t){if(!t||t.type!=="Logical"&&t.type!=="Physical")throw new Error("the `position` argument must be either a LogicalPosition or a PhysicalPosition instance");return u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setPosition",payload:{type:t.type,data:{x:t.x,y:t.y}}}}}})}async setFullscreen(t){return u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setFullscreen",payload:t}}}})}async setFocus(){return u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setFocus"}}}})}async setIcon(t){return u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setIcon",payload:{icon:typeof t=="string"?t:Array.from(t)}}}}})}async setSkipTaskbar(t){return u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setSkipTaskbar",payload:t}}}})}async setCursorGrab(t){return u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setCursorGrab",payload:t}}}})}async setCursorVisible(t){return u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setCursorVisible",payload:t}}}})}async setCursorIcon(t){return u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setCursorIcon",payload:t}}}})}async setCursorPosition(t){if(!t||t.type!=="Logical"&&t.type!=="Physical")throw new Error("the `position` argument must be either a LogicalPosition or a PhysicalPosition instance");return u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setCursorPosition",payload:{type:t.type,data:{x:t.x,y:t.y}}}}}})}async setIgnoreCursorEvents(t){return u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"setIgnoreCursorEvents",payload:t}}}})}async startDragging(){return u({__tauriModule:"Window",message:{cmd:"manage",data:{label:this.label,cmd:{type:"startDragging"}}}})}async onResized(t){return this.listen("tauri://resize",t)}async onMoved(t){return this.listen("tauri://move",t)}async onCloseRequested(t){return this.listen("tauri://close-requested",n=>{let r=new an(n);Promise.resolve(t(r)).then(()=>{if(!r.isPreventDefault())return this.close()})})}async onFocusChanged(t){let n=await this.listen("tauri://focus",s=>{t({...s,payload:!0})}),r=await this.listen("tauri://blur",s=>{t({...s,payload:!1})});return()=>{n(),r()}}async onScaleChanged(t){return this.listen("tauri://scale-change",t)}async onMenuClicked(t){return this.listen("tauri://menu",t)}async onFileDropEvent(t){let n=await this.listen("tauri://file-drop",i=>{t({...i,payload:{type:"drop",paths:i.payload}})}),r=await this.listen("tauri://file-drop-hover",i=>{t({...i,payload:{type:"hover",paths:i.payload}})}),s=await this.listen("tauri://file-drop-cancelled",i=>{t({...i,payload:{type:"cancel"}})});return()=>{n(),r(),s()}}async onThemeChanged(t){return this.listen("tauri://theme-changed",t)}},an=class{constructor(t){this._preventDefault=!1,this.event=t.event,this.windowLabel=t.windowLabel,this.id=t.id}preventDefault(){this._preventDefault=!0}isPreventDefault(){return this._preventDefault}},ve=class extends nn{constructor(t,n={}){super(t),n!=null&&n.skip||u({__tauriModule:"Window",message:{cmd:"createWebview",data:{options:{label:t,...n}}}}).then(async()=>this.emit("tauri://created")).catch(async r=>this.emit("tauri://error",r))}static getByLabel(t){return en().some(n=>n.label===t)?new ve(t,{skip:!0}):null}},rt;"__TAURI_METADATA__"in window?rt=new ve(window.__TAURI_METADATA__.__currentWindow.label,{skip:!0}):(console.warn(`Could not find "window.__TAURI_METADATA__". The "appWindow" value will reference the "main" window label.
Note that this is not an issue if running this frontend on a browser instead of a Tauri window.`),rt=new ve("main",{skip:!0}));function yt(e){return e===null?null:{name:e.name,scaleFactor:e.scaleFactor,position:new We(e.position.x,e.position.y),size:new Fe(e.size.width,e.size.height)}}async function ka(){return u({__tauriModule:"Window",message:{cmd:"manage",data:{cmd:{type:"currentMonitor"}}}}).then(yt)}async function Ta(){return u({__tauriModule:"Window",message:{cmd:"manage",data:{cmd:{type:"primaryMonitor"}}}}).then(yt)}async function Ea(){return u({__tauriModule:"Window",message:{cmd:"manage",data:{cmd:{type:"availableMonitors"}}}}).then(e=>e.map(yt))}var Aa={};K(Aa,{isPermissionGranted:()=>Ma,requestPermission:()=>Da,sendNotification:()=>za});async function Ma(){return window.Notification.permission!=="default"?Promise.resolve(window.Notification.permission==="granted"):u({__tauriModule:"Notification",message:{cmd:"isNotificationPermissionGranted"}})}async function Da(){return window.Notification.requestPermission()}function za(e){typeof e=="string"?new window.Notification(e):new window.Notification(e.title,e)}function gt(){return navigator.appVersion.includes("Win")}var rn={};K(rn,{EOL:()=>La,arch:()=>Ia,platform:()=>sn,tempdir:()=>Fa,type:()=>Oa,version:()=>Na});var La=gt()?`\r
`:`
`;async function sn(){return u({__tauriModule:"Os",message:{cmd:"platform"}})}async function Na(){return u({__tauriModule:"Os",message:{cmd:"version"}})}async function Oa(){return u({__tauriModule:"Os",message:{cmd:"osType"}})}async function Ia(){return u({__tauriModule:"Os",message:{cmd:"arch"}})}async function Fa(){return u({__tauriModule:"Os",message:{cmd:"tempdir"}})}var X={};K(X,{BaseDirectory:()=>je,Dir:()=>je,copyFile:()=>Ga,createDir:()=>wt,exists:()=>bt,readBinaryFile:()=>Wa,readDir:()=>Ua,readTextFile:()=>on,removeDir:()=>Ha,removeFile:()=>Va,renameFile:()=>Ba,writeBinaryFile:()=>ja,writeFile:()=>Ue,writeTextFile:()=>Ue});var je=(e=>(e[e.Audio=1]="Audio",e[e.Cache=2]="Cache",e[e.Config=3]="Config",e[e.Data=4]="Data",e[e.LocalData=5]="LocalData",e[e.Desktop=6]="Desktop",e[e.Document=7]="Document",e[e.Download=8]="Download",e[e.Executable=9]="Executable",e[e.Font=10]="Font",e[e.Home=11]="Home",e[e.Picture=12]="Picture",e[e.Public=13]="Public",e[e.Runtime=14]="Runtime",e[e.Template=15]="Template",e[e.Video=16]="Video",e[e.Resource=17]="Resource",e[e.App=18]="App",e[e.Log=19]="Log",e[e.Temp=20]="Temp",e[e.AppConfig=21]="AppConfig",e[e.AppData=22]="AppData",e[e.AppLocalData=23]="AppLocalData",e[e.AppCache=24]="AppCache",e[e.AppLog=25]="AppLog",e))(je||{});async function on(e,t={}){return u({__tauriModule:"Fs",message:{cmd:"readTextFile",path:e,options:t}})}async function Wa(e,t={}){let n=await u({__tauriModule:"Fs",message:{cmd:"readFile",path:e,options:t}});return Uint8Array.from(n)}async function Ue(e,t,n){typeof n=="object"&&Object.freeze(n),typeof e=="object"&&Object.freeze(e);let r={path:"",contents:""},s=n;return typeof e=="string"?r.path=e:(r.path=e.path,r.contents=e.contents),typeof t=="string"?r.contents=t!=null?t:"":s=t,u({__tauriModule:"Fs",message:{cmd:"writeFile",path:r.path,contents:Array.from(new TextEncoder().encode(r.contents)),options:s}})}async function ja(e,t,n){typeof n=="object"&&Object.freeze(n),typeof e=="object"&&Object.freeze(e);let r={path:"",contents:[]},s=n;return typeof e=="string"?r.path=e:(r.path=e.path,r.contents=e.contents),t&&"dir"in t?s=t:typeof e=="string"&&(r.contents=t!=null?t:[]),u({__tauriModule:"Fs",message:{cmd:"writeFile",path:r.path,contents:Array.from(r.contents instanceof ArrayBuffer?new Uint8Array(r.contents):r.contents),options:s}})}async function Ua(e,t={}){return u({__tauriModule:"Fs",message:{cmd:"readDir",path:e,options:t}})}async function wt(e,t={}){return u({__tauriModule:"Fs",message:{cmd:"createDir",path:e,options:t}})}async function Ha(e,t={}){return u({__tauriModule:"Fs",message:{cmd:"removeDir",path:e,options:t}})}async function Ga(e,t,n={}){return u({__tauriModule:"Fs",message:{cmd:"copyFile",source:e,destination:t,options:n}})}async function Va(e,t={}){return u({__tauriModule:"Fs",message:{cmd:"removeFile",path:e,options:t}})}async function Ba(e,t,n={}){return u({__tauriModule:"Fs",message:{cmd:"renameFile",oldPath:e,newPath:t,options:n}})}async function bt(e,t={}){return u({__tauriModule:"Fs",message:{cmd:"exists",path:e,options:t}})}var G={};K(G,{BaseDirectory:()=>je,appCacheDir:()=>Ya,appConfigDir:()=>ln,appDataDir:()=>Ja,appDir:()=>Ka,appLocalDataDir:()=>qa,appLogDir:()=>dn,audioDir:()=>Xa,basename:()=>_r,cacheDir:()=>Qa,configDir:()=>Za,dataDir:()=>er,delimiter:()=>yr,desktopDir:()=>tr,dirname:()=>Ae,documentDir:()=>nr,downloadDir:()=>ar,executableDir:()=>rr,extname:()=>br,fontDir:()=>sr,homeDir:()=>cn,isAbsolute:()=>vr,join:()=>Be,localDataDir:()=>ir,logDir:()=>pr,normalize:()=>wr,pictureDir:()=>or,publicDir:()=>lr,resolve:()=>gr,resolveResource:()=>dr,resourceDir:()=>cr,runtimeDir:()=>ur,sep:()=>fr,templateDir:()=>hr,videoDir:()=>mr});async function Ka(){return ln()}async function ln(){return u({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:21}})}async function Ja(){return u({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:22}})}async function qa(){return u({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:23}})}async function Ya(){return u({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:24}})}async function Xa(){return u({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:1}})}async function Qa(){return u({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:2}})}async function Za(){return u({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:3}})}async function er(){return u({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:4}})}async function tr(){return u({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:6}})}async function nr(){return u({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:7}})}async function ar(){return u({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:8}})}async function rr(){return u({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:9}})}async function sr(){return u({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:10}})}async function cn(){return u({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:11}})}async function ir(){return u({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:5}})}async function or(){return u({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:12}})}async function lr(){return u({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:13}})}async function cr(){return u({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:17}})}async function dr(e){return u({__tauriModule:"Path",message:{cmd:"resolvePath",path:e,directory:17}})}async function ur(){return u({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:14}})}async function hr(){return u({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:15}})}async function mr(){return u({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:16}})}async function pr(){return dn()}async function dn(){return u({__tauriModule:"Path",message:{cmd:"resolvePath",path:"",directory:25}})}var fr=gt()?"\\":"/",yr=gt()?";":":";async function gr(...e){return u({__tauriModule:"Path",message:{cmd:"resolve",paths:e}})}async function wr(e){return u({__tauriModule:"Path",message:{cmd:"normalize",path:e}})}async function Be(...e){return u({__tauriModule:"Path",message:{cmd:"join",paths:e}})}async function Ae(e){return u({__tauriModule:"Path",message:{cmd:"dirname",path:e}})}async function br(e){return u({__tauriModule:"Path",message:{cmd:"extname",path:e}})}async function _r(e,t){return u({__tauriModule:"Path",message:{cmd:"basename",path:e,ext:t}})}async function vr(e){return u({__tauriModule:"Path",message:{cmd:"isAbsolute",path:e}})}var st={};K(st,{exit:()=>xr,relaunch:()=>Sr});async function xr(e=0){return u({__tauriModule:"Process",message:{cmd:"exit",exitCode:e}})}async function Sr(){return u({__tauriModule:"Process",message:{cmd:"relaunch"}})}var ge={};K(ge,{Child:()=>un,Command:()=>hn,EventEmitter:()=>Oe,open:()=>mn});async function Pr(e,t,n=[],r){return typeof n=="object"&&Object.freeze(n),u({__tauriModule:"Shell",message:{cmd:"execute",program:t,args:n,options:r,onEventFn:fe(e)}})}var Oe=class{constructor(){this.eventListeners=Object.create(null)}addListener(t,n){return this.on(t,n)}removeListener(t,n){return this.off(t,n)}on(t,n){return t in this.eventListeners?this.eventListeners[t].push(n):this.eventListeners[t]=[n],this}once(t,n){let r=(...s)=>{this.removeListener(t,r),n(...s)};return this.addListener(t,r)}off(t,n){return t in this.eventListeners&&(this.eventListeners[t]=this.eventListeners[t].filter(r=>r!==n)),this}removeAllListeners(t){return t?delete this.eventListeners[t]:this.eventListeners=Object.create(null),this}emit(t,...n){if(t in this.eventListeners){let r=this.eventListeners[t];for(let s of r)s(...n);return!0}return!1}listenerCount(t){return t in this.eventListeners?this.eventListeners[t].length:0}prependListener(t,n){return t in this.eventListeners?this.eventListeners[t].unshift(n):this.eventListeners[t]=[n],this}prependOnceListener(t,n){let r=(...s)=>{this.removeListener(t,r),n(...s)};return this.prependListener(t,r)}},un=class{constructor(e){this.pid=e}async write(e){return u({__tauriModule:"Shell",message:{cmd:"stdinWrite",pid:this.pid,buffer:typeof e=="string"?e:Array.from(e)}})}async kill(){return u({__tauriModule:"Shell",message:{cmd:"killChild",pid:this.pid}})}},hn=class extends Oe{constructor(t,n=[],r){super(),this.stdout=new Oe,this.stderr=new Oe,this.program=t,this.args=typeof n=="string"?[n]:n,this.options=r!=null?r:{}}static sidecar(t,n=[],r){let s=new hn(t,n,r);return s.options.sidecar=!0,s}async spawn(){return Pr(t=>{switch(t.event){case"Error":this.emit("error",t.payload);break;case"Terminated":this.emit("close",t.payload);break;case"Stdout":this.stdout.emit("data",t.payload);break;case"Stderr":this.stderr.emit("data",t.payload);break}},this.program,this.args,this.options).then(t=>new un(t))}async execute(){return new Promise((t,n)=>{this.on("error",n);let r=[],s=[];this.stdout.on("data",i=>{r.push(i)}),this.stderr.on("data",i=>{s.push(i)}),this.on("close",i=>{t({code:i.code,signal:i.signal,stdout:r.join(`
`),stderr:s.join(`
`)})}),this.spawn().catch(n)})}};async function mn(e,t){return u({__tauriModule:"Shell",message:{cmd:"open",path:e,with:t}})}var $r={};K($r,{getMatches:()=>Cr});async function Cr(){return u({__tauriModule:"Cli",message:{cmd:"cliMatches"}})}var Rr={};K(Rr,{readText:()=>Tr,writeText:()=>kr});async function kr(e){return u({__tauriModule:"Clipboard",message:{cmd:"writeText",data:e}})}async function Tr(){return u({__tauriModule:"Clipboard",message:{cmd:"readText",data:null}})}var it={};K(it,{ask:()=>Dr,confirm:()=>zr,message:()=>Mr,open:()=>Er,save:()=>Ar});async function Er(e={}){return typeof e=="object"&&Object.freeze(e),u({__tauriModule:"Dialog",message:{cmd:"openDialog",options:e}})}async function Ar(e={}){return typeof e=="object"&&Object.freeze(e),u({__tauriModule:"Dialog",message:{cmd:"saveDialog",options:e}})}async function Mr(e,t){var n;let r=typeof t=="string"?{title:t}:t;return u({__tauriModule:"Dialog",message:{cmd:"messageDialog",message:e.toString(),title:(n=r==null?void 0:r.title)==null?void 0:n.toString(),type:r==null?void 0:r.type}})}async function Dr(e,t){var n;let r=typeof t=="string"?{title:t}:t;return u({__tauriModule:"Dialog",message:{cmd:"askDialog",message:e.toString(),title:(n=r==null?void 0:r.title)==null?void 0:n.toString(),type:r==null?void 0:r.type}})}async function zr(e,t){var n;let r=typeof t=="string"?{title:t}:t;return u({__tauriModule:"Dialog",message:{cmd:"confirmDialog",message:e.toString(),title:(n=r==null?void 0:r.title)==null?void 0:n.toString(),type:r==null?void 0:r.type}})}var Lr={};K(Lr,{isRegistered:()=>Ir,register:()=>Nr,registerAll:()=>Or,unregister:()=>Fr,unregisterAll:()=>Wr});async function Nr(e,t){return u({__tauriModule:"GlobalShortcut",message:{cmd:"register",shortcut:e,handler:fe(t)}})}async function Or(e,t){return u({__tauriModule:"GlobalShortcut",message:{cmd:"registerAll",shortcuts:e,handler:fe(t)}})}async function Ir(e){return u({__tauriModule:"GlobalShortcut",message:{cmd:"isRegistered",shortcut:e}})}async function Fr(e){return u({__tauriModule:"GlobalShortcut",message:{cmd:"unregister",shortcut:e}})}async function Wr(){return u({__tauriModule:"GlobalShortcut",message:{cmd:"unregisterAll"}})}var jr={};K(jr,{Body:()=>Ce,Client:()=>yn,Response:()=>fn,ResponseType:()=>pn,fetch:()=>Ur,getClient:()=>gn});var pn=(e=>(e[e.JSON=1]="JSON",e[e.Text=2]="Text",e[e.Binary=3]="Binary",e))(pn||{}),Ce=class{constructor(e,t){this.type=e,this.payload=t}static form(e){let t={},n=(r,s)=>{if(s!==null){let i;typeof s=="string"?i=s:s instanceof Uint8Array||Array.isArray(s)?i=Array.from(s):s instanceof File?i={file:s.name,mime:s.type,fileName:s.name}:typeof s.file=="string"?i={file:s.file,mime:s.mime,fileName:s.fileName}:i={file:Array.from(s.file),mime:s.mime,fileName:s.fileName},t[String(r)]=i}};if(e instanceof FormData)for(let[r,s]of e)n(r,s);else for(let[r,s]of Object.entries(e))n(r,s);return new Ce("Form",t)}static json(e){return new Ce("Json",e)}static text(e){return new Ce("Text",e)}static bytes(e){return new Ce("Bytes",Array.from(e instanceof ArrayBuffer?new Uint8Array(e):e))}},fn=class{constructor(e){this.url=e.url,this.status=e.status,this.ok=this.status>=200&&this.status<300,this.headers=e.headers,this.rawHeaders=e.rawHeaders,this.data=e.data}},yn=class{constructor(e){this.id=e}async drop(){return u({__tauriModule:"Http",message:{cmd:"dropClient",client:this.id}})}async request(e){let t=!e.responseType||e.responseType===1;return t&&(e.responseType=2),u({__tauriModule:"Http",message:{cmd:"httpRequest",client:this.id,options:e}}).then(n=>{let r=new fn(n);if(t){try{r.data=JSON.parse(r.data)}catch(s){if(r.ok&&r.data==="")r.data={};else if(r.ok)throw Error(`Failed to parse response \`${r.data}\` as JSON: ${s};
              try setting the \`responseType\` option to \`ResponseType.Text\` or \`ResponseType.Binary\` if the API does not return a JSON response.`)}return r}return r})}async get(e,t){return this.request({method:"GET",url:e,...t})}async post(e,t,n){return this.request({method:"POST",url:e,body:t,...n})}async put(e,t,n){return this.request({method:"PUT",url:e,body:t,...n})}async patch(e,t){return this.request({method:"PATCH",url:e,...t})}async delete(e,t){return this.request({method:"DELETE",url:e,...t})}};async function gn(e){return u({__tauriModule:"Http",message:{cmd:"createClient",options:e}}).then(t=>new yn(t))}var Xe=null;async function Ur(e,t){var n;return Xe===null&&(Xe=await gn()),Xe.request({url:e,method:(n=t==null?void 0:t.method)!=null?n:"GET",...t})}var V=ht;function J(e){const t=l.useRef(!0);l.useEffect(()=>{t.current&&(e(),t.current=!1)})}const ot="chat.conf.json",wn="chat.model.json",Hr="chat.model.cmd.json",Qe="chat.download.json",He="chat.awesome.json",Ze="chat.notes.json",Gr="https://raw.githubusercontent.com/lencx/ChatGPT/main/UPDATE_LOG.md",Y={autoCapitalize:"off",autoComplete:"off",spellCheck:!1},U=async()=>Be(await cn(),".chatgpt"),De=async(e,t={})=>{const{defaultVal:n={},isRoot:r=!1,isList:s=!1}=t,i=await U();let c=e;r||(c=await Be(i,e)),await bt(c)||(await Ae(c)!==i&&await wt(await Ae(c),{recursive:!0}),await Ue(c,s?"[]":JSON.stringify({name:"ChatGPT",link:"https://github.com/lencx/ChatGPT",...n},null,2)));try{return JSON.parse(await on(c))}catch{return{}}},Ge=async(e,t,n={})=>{const{isRoot:r=!1}=n,s=await U();let i=e;r||(i=await Be(s,e)),r&&!await bt(await Ae(i))&&await wt(await Ae(i),{recursive:!0}),await Ue(i,JSON.stringify(t,null,2))},Se=e=>On(e).format("YYYY-MM-DD HH:mm:ss"),_t=e=>e.replace(/\s+|\/+/g,"_").replace(/[^\d\w]/g,"").toLocaleLowerCase(),de=({className:e,label:t="PATH",paths:n="",url:r,content:s})=>{const[i,c]=l.useState("");return l.useEffect(()=>{!G&&!r||(async()=>{if(r){c(r);return}c(await G.join(await U(),...n.split("/").filter(p=>!!p)))})()},[r,n]),a("div",{className:ut(e,"chat-file-path"),children:h("div",{children:[t,":"," ",a("a",{onClick:()=>ge.open(i),title:i,children:s||i})]})})};function Vr(){const[e,t]=l.useState(""),[n,r]=l.useState([]);return J(async()=>{t(await sn()),speechSynthesis.addEventListener("voiceschanged",()=>{const s=speechSynthesis.getVoices();console.log(s),r(s)}),r(speechSynthesis.getVoices())}),h(ee,{children:[a(T.Item,{label:"Stay On Top",name:"stay_on_top",valuePropName:"checked",children:a(q,{})}),a(T.Item,{label:"Save Window State",name:"save_window_state",valuePropName:"checked",children:a(q,{})}),e==="darwin"&&a(T.Item,{label:"Titlebar",name:"titlebar",valuePropName:"checked",children:a(q,{})}),e==="darwin"&&a(T.Item,{label:"Hide Dock Icon",name:"hide_dock_icon",valuePropName:"checked",children:a(q,{})}),a(T.Item,{label:"Theme",name:"theme",children:h(he.Group,{children:[a(he,{value:"light",children:"Light"}),a(he,{value:"dark",children:"Dark"}),["darwin","windows"].includes(e)&&a(he,{value:"System",children:"System"})]})}),a(T.Item,{label:a(Br,{}),name:"auto_update",children:h(he.Group,{children:[a(he,{value:"prompt",children:"Prompt"}),a(he,{value:"silent",children:"Silent"})]})}),a(T.Item,{label:a(Kr,{}),name:"global_shortcut",children:a(Q,{placeholder:"CmdOrCtrl+Shift+O",...Y})}),a(T.Item,{label:"Set Speech Language",name:"speech_lang",children:a(se,{children:n.map(s=>h(se.Option,{value:s.voiceURI,children:[s.name," ",": ",a(j,{children:s.lang})]},s.voiceURI))})})]})}const Br=()=>h("span",{children:["Auto Update"," ",a(ie,{title:h("div",{children:[a("div",{children:"Auto Update Policy"}),h("div",{children:[a("strong",{children:"Prompt"}),": prompt to install"]}),h("div",{children:[a("strong",{children:"Silent"}),": install silently"]})]}),children:a(ue,{style:{color:"#1677ff"}})})]}),Kr=()=>h("div",{children:["Global Shortcut"," ",a(ie,{title:h("div",{children:[a("div",{children:'Shortcut definition, modifiers and key separated by "+" e.g. CmdOrControl+Q'}),a("div",{style:{margin:"10px 0"},children:"If empty, the shortcut is disabled."}),a("a",{href:"https://tauri.app/v1/api/js/globalshortcut",target:"_blank",children:"https://tauri.app/v1/api/js/globalshortcut"})]}),children:a(ue,{style:{color:"#1677ff"}})})]});function ze(e){const[t,n]=l.useState(),r=async()=>{const i=await De(e);return n(i),i},s=async i=>{await Ge(e,i),await r()};return J(r),{json:t,refreshJson:r,updateJson:s}}const bn=({name:e})=>{const{json:t=[]}=ze(He),n=T.useFormInstance(),r=`(${e==="main"?"Main":"SystemTray"})`,s=`${e}_dashboard`,i=`${e}_origin`,c=T.useWatch(s,n);let p=[{title:"ChatGPT",url:"https://chat.openai.com",init:!0}];return Array.isArray(t)&&(p=p.concat(t)),h(ee,{children:[a(T.Item,{label:h("span",{children:["Dashboard ",r," ",a(ie,{title:h("div",{children:[a("p",{children:a("b",{children:"Set Dashboard as the application default window."})}),h("p",{children:["If this is enabled, the ",h(j,{color:"blue",children:["Switch Origin ",r]})," ","setting will be invalid."]}),h("p",{children:["If you want to add a new URL to the dashboard, add it in the"," ",a(Te,{to:"/awesome",children:"Awesome"})," menu and make sure it is enabled."]})]}),children:a(ue,{style:{color:"#1677ff"}})})]}),name:s,valuePropName:"checked",children:a(q,{})}),a(T.Item,{label:h("span",{children:["Switch Origin ",r," ",a(ie,{title:h("div",{children:[a("p",{children:a("b",{children:"Set a single URL as the application default window."})}),h("p",{children:["If you need to set a new URL as the application loading window, please add the URL in the ",a(Te,{to:"/awesome",children:"Awesome"})," menu and then select it."]})]}),children:a(ue,{style:{color:"#1677ff"}})})]}),name:i,children:a(se,{disabled:c,showSearch:!0,...Y,optionLabelProp:"url",children:p.map((f,o)=>h(se.Option,{label:f.title,value:f.url,title:`${f.title}${f.init?"(Built-in)":""}: ${f.url}`,children:[a(j,{color:f.init?"orange":"geekblue",children:f.title})," ",f.url]},`${o}_${f.url}`))})})]})},Jr=()=>h("span",{children:["Pop-up Search"," ",a(ie,{title:h("div",{children:[h("div",{style:{marginBottom:10},children:["Generate images according to the content: Select the ChatGPT content with the mouse, no more than 400 characters. the ",a("b",{children:"DALL·E 2"})," button appears, and click to jump (Note: because the search content filled by the script cannot trigger the event directly, you need to enter a space in the input box to make the button clickable)."]}),a("div",{children:"The application is built using Tauri, and due to its security restrictions, some of the action buttons will not work, so we recommend going to your browser."})]}),children:a(ue,{style:{color:"#1677ff"}})})]}),qr=()=>h("span",{children:["Close Exit"," ",a(ie,{title:"Click the close button whether to exit directly, the default minimized.",children:a(ue,{style:{color:"#1677ff"}})})]});function Yr(){return h(ee,{children:[a(T.Item,{label:a(Jr,{}),name:"popup_search",valuePropName:"checked",children:a(q,{})}),a(T.Item,{label:a(qr,{}),name:"main_close",valuePropName:"checked",children:a(q,{})}),a(T.Item,{label:"Default Width",name:"main_width",children:a(Ie,{})}),a(T.Item,{label:"Default Height",name:"main_height",children:a(Ie,{})}),a(bn,{name:"main"}),a(T.Item,{label:"User Agent (Main)",name:"ua_window",children:a(Q.TextArea,{autoSize:{minRows:4,maxRows:4},...Y,placeholder:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36"})})]})}const Xr=()=>h("span",{children:["User Agent (SystemTray)"," ",a(ie,{title:a("div",{children:"For a better experience, we recommend using the Mobile User-Agent."}),children:a(ue,{style:{color:"#1677ff"}})})]});function Qr(){return h(ee,{children:[a(T.Item,{label:"Enable SystemTray",name:"tray",valuePropName:"checked",children:a(q,{})}),a(T.Item,{label:"Default Width",name:"tray_width",children:a(Ie,{})}),a(T.Item,{label:"Default Height",name:"tray_height",children:a(Ie,{})}),a(bn,{name:"tray"}),a(T.Item,{label:a(Xr,{}),name:"ua_tray",children:a(Q.TextArea,{autoSize:{minRows:4,maxRows:4},...Y,placeholder:"Mozilla/5.0 (iPhone; CPU iPhone OS 16_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.0 Mobile/15E148 Safari/604.1"})})]})}function Zr(){const[e]=Ot(),[t,n]=l.useState("general"),[r]=T.useForm(),[s,i]=l.useState(null),[c,p]=l.useState(""),f=e.get("type");l.useEffect(()=>{n(f||"general")},[f]),J(async()=>{i(await V("get_app_conf")),p(await G.join(await U(),ot))}),l.useEffect(()=>{r.setFieldsValue(Ne.clone(s))},[s]);const o=()=>{r.setFieldsValue(s)},m=async()=>{const d=await V("reset_app_conf");if(i(d),await it.ask("Configuration reset successfully, do you want to restart?",{title:"ChatGPT Preferences"})){st.relaunch();return}B.success("Configuration reset successfully")};return h("div",{children:[a(de,{paths:ot}),h(T,{form:r,style:{maxWidth:500},onFinish:async d=>{if(!Ne.isEqual(Ne.omit(s,["default_origin"]),d)){if(await V("form_confirm",{data:d,label:"main"}),await it.ask("Configuration saved successfully, do you want to restart?",{title:"ChatGPT Preferences"})){st.relaunch();return}B.success("Configuration saved successfully")}},labelCol:{span:10},wrapperCol:{span:13,offset:1},children:[a(Nt,{activeKey:t,onChange:d=>{n(d)},items:[{label:"General",key:"general",children:a(Vr,{})},{label:"Main Window",key:"main_window",children:a(Yr,{})},{label:"SystemTray Window",key:"tray_window",children:a(Qr,{})}]}),a(T.Item,{children:h(xe,{size:20,children:[a(W,{onClick:o,children:"Cancel"}),a(W,{type:"primary",htmlType:"submit",children:"Submit"}),a(oe,{title:h("div",{style:{width:360},children:["Are you sure you want to reset the configuration file",a("a",{onClick:()=>ge.open(c),style:{margin:"0 5px"},children:c}),"to the default?"]}),onConfirm:m,okText:"Yes",cancelText:"No",children:a(W,{type:"dashed",children:"Reset to defaults"})})]})})]})]})}const es={hljs:{display:"block",overflowX:"auto",padding:"0.5em",background:"#333",color:"white"},"hljs-name":{fontWeight:"bold"},"hljs-strong":{fontWeight:"bold"},"hljs-code":{fontStyle:"italic",color:"#888"},"hljs-emphasis":{fontStyle:"italic"},"hljs-tag":{color:"#62c8f3"},"hljs-variable":{color:"#ade5fc"},"hljs-template-variable":{color:"#ade5fc"},"hljs-selector-id":{color:"#ade5fc"},"hljs-selector-class":{color:"#ade5fc"},"hljs-string":{color:"#a2fca2"},"hljs-bullet":{color:"#d36363"},"hljs-type":{color:"#ffa"},"hljs-title":{color:"#ffa"},"hljs-section":{color:"#ffa"},"hljs-attribute":{color:"#ffa"},"hljs-quote":{color:"#ffa"},"hljs-built_in":{color:"#ffa"},"hljs-builtin-name":{color:"#ffa"},"hljs-number":{color:"#d36363"},"hljs-symbol":{color:"#d36363"},"hljs-keyword":{color:"#fcc28c"},"hljs-selector-tag":{color:"#fcc28c"},"hljs-literal":{color:"#fcc28c"},"hljs-comment":{color:"#888"},"hljs-deletion":{color:"#333",backgroundColor:"#fc9b9b"},"hljs-regexp":{color:"#c6b4f0"},"hljs-link":{color:"#c6b4f0"},"hljs-meta":{color:"#fc9b9b"},"hljs-addition":{backgroundColor:"#a2fca2",color:"#333"}};const vt=({children:e,className:t})=>a("div",{className:ut(t,"markdown-body"),children:a("div",{children:a(ra,{children:e,linkTarget:"_blank",remarkPlugins:[na],rehypePlugins:[aa],components:{code({node:n,inline:r,className:s,children:i,...c}){const p=/language-(\w+)/.exec(s||"");return!r&&p?a(sa,{children:String(i).replace(/\n$/,""),style:es,language:p[1],showLineNumbers:!0,lineNumberStyle:{color:"#999"},PreTag:"div",...c}):a("code",{className:s,...c,children:i})}}})})});function ts(){const[e,t]=l.useState("");return J(async()=>{const n=await V("get_data",{url:Gr})||"";t(n)}),a("div",{className:"about",children:a(Nt,{items:[{label:"About ChatGPT",key:"about",children:a(ns,{})},{label:"Update Log",key:"log",children:a(as,{content:e})}]})})}const ns=()=>h("div",{className:"about-tab",children:[a(j,{children:"ChatGPT Desktop Application (Mac, Windows and Linux)"}),h("p",{children:["🕒 History versions:"," ",a("a",{href:"https://github.com/lencx/ChatGPT/releases",target:"_blank",children:"lencx/ChatGPT/releases"})]}),h("p",{children:["It is just a wrapper for the",h("a",{href:"https://chat.openai.com",target:"_blank",title:"https://chat.openai.com",children:[" ","OpenAI ChatGPT"," "]}),"website, no other data transfer exists (you can check the"," ",h("a",{href:"https://github.com/lencx/ChatGPT",target:"_blank",title:"https://github.com/lencx/ChatGPT",children:[" ","source code"," "]}),"). The development and maintenance of this software has taken up a lot of my time. If it helps you, you can buy me a cup of coffee (Chinese users can use WeChat to scan the code), thanks!"]}),h("p",{className:"imgs",style:{float:"left"},children:[a("a",{href:"https://www.buymeacoffee.com/lencx",target:"_blank",children:a("img",{src:"https://cdn.buymeacoffee.com/buttons/v2/default-blue.png",alt:"Buy Me A Coffee"})})," ",a("br",{}),a("img",{width:"200",src:"https://user-images.githubusercontent.com/16164244/207228025-117b5f77-c5d2-48c2-a070-774b7a1596f2.png"})]}),a("img",{width:"250",src:"https://user-images.githubusercontent.com/16164244/219439614-d5c3710c-e0b3-4df9-9b3c-c150ba0ba5f1.png"})]}),as=({content:e})=>h("div",{children:[h("p",{children:["Ref:"," ",a("a",{href:"https://github.com/lencx/ChatGPT/blob/main/UPDATE_LOG.md",target:"_blank",children:"lencx/ChatGPT/UPDATE_LOG.md"})]}),a(vt,{className:"log-tab",children:e})]}),me=Symbol("chat-id");function we(e){const[t,n]=l.useState([]);l.useEffect(()=>{s(e)},[]);const r=o=>{const m=[o,...t];return n(m),m},s=(o=[])=>{if(!o||!Array.isArray(o))return;const m=o.map(b=>({[me]:Ft(),...b}));n(m)};return{opSafeKey:me,opInit:s,opReplace:(o,m)=>{const b=[...t],g=t.findIndex(d=>d[me]===o);return b[g]=m,n(b),b},opAdd:r,opRemove:o=>{const m=t.filter(b=>b[me]!==o);return n(m),m},opRemoveItems:o=>{const m=t.filter(b=>!o.includes(b[me]));return n(m),m},opData:t,opReplaceItems:(o,m)=>{const b=[...t];let g=0;for(let d=0;d<b.length;d++){const w=b[d];if(o.includes(w[me])&&(g++,b[d]={...w,...m}),g===o.length)break}return n(b),b}}}function be(e=[]){const[t,n]=l.useState(""),[r,s]=l.useState(null),[i,c]=l.useState(null),[p,f]=l.useState(null),o=l.useCallback((d,w)=>{n(w),s(d),c(Date.now())},[]),m=l.useCallback(()=>{s(null),n(""),c(Date.now())},[]),b=l.useCallback(()=>o(null,"new"),[o]),g=e.map(d=>{if(d.render){const w=d.render;d.render=(P,S)=>w(P,S,{setRecord:o,setExtra:f})}return d});return{opTime:i,opType:t,opNew:b,columns:g,opRecord:r,setRecord:o,resetRecord:m,setExtra:f,opExtra:p}}const _n=({rowKey:e,row:t,actions:n})=>{const[r,s]=l.useState(!1),[i,c]=l.useState(t[e]||"");return r?a(Q,{value:i,autoFocus:!0,onChange:m=>{c(m.target.value)},...Y,onPressEnter:()=>{s(!1),t[e]=i==null?void 0:i.trim(),n==null||n.setRecord(t,"rowedit")}}):a("div",{className:"rowedit",onClick:()=>{s(!0)},children:i})};function Pe(e){const{key:t="id",rowType:n="id"}=e||{},[r,s]=l.useState([]),[i,c]=l.useState([]),[p,f]=l.useState([]),o=(g,d)=>{const w=d.map(P=>P[me]||P[t]);s(g),n==="id"&&c(w),n==="row"&&f(d),n==="all"&&(c(w),f(d))},m=()=>{s([]),c([]),f([])};return{rowSelection:{selectedRowKeys:r,onChange:o,selections:[Z.SELECTION_ALL,Z.SELECTION_INVERT,Z.SELECTION_NONE]},selectedRowIDs:i,selectedRows:p,rowReset:m}}const _e={hideOnSinglePage:!0,showSizeChanger:!0,showQuickJumper:!0,defaultPageSize:10,pageSizeOptions:[5,10,15,20],showTotal:e=>h("span",{children:["Total ",e," items"]})},rs=()=>[{title:"Title",dataIndex:"title",fixed:"left",key:"title",width:160},{title:"URL",dataIndex:"url",key:"url",width:200,render:e=>a("a",{onClick:()=>mn(e),children:e})},{title:"Enable",dataIndex:"enable",key:"enable",width:80,render:(e=!0,t,n)=>a(q,{checked:e,onChange:r=>n.setRecord({...t,enable:r},"enable")})},{title:"Category",dataIndex:"category",key:"category",width:120,render:e=>a(j,{color:"geekblue",children:e})},{title:"Tags",dataIndex:"tags",key:"tags",width:150,render:e=>a("span",{className:"chat-tags",children:e==null?void 0:e.map(t=>a(j,{children:t},t))})},{title:"Action",fixed:"right",width:150,render:(e,t,n)=>h(xe,{children:[a("a",{onClick:()=>n.setRecord(t,"edit"),children:"Edit"}),a(oe,{title:"Are you sure you want to delete this URL?",onConfirm:()=>n.setRecord(t,"delete"),okText:"Yes",cancelText:"No",children:a("a",{children:"Delete"})})]})}],vn=({max:e=99,value:t=[],onChange:n,addTxt:r="New Tag"})=>{const[s,i]=l.useState(t),[c,p]=l.useState(!1),[f,o]=l.useState(""),m=l.useRef(null);l.useEffect(()=>{i(t)},[t]),l.useEffect(()=>{var $;c&&(($=m.current)==null||$.focus())},[c]);const b=$=>{const y=s.filter(x=>x!==$);i(y)},g=()=>{p(!0)},d=$=>{o($.target.value)},w=()=>{if(f&&s.indexOf(f)===-1){const $=[...s,f];i($),n&&n($)}p(!1),o("")},P=$=>a("span",{style:{display:"inline-block"},children:a(j,{closable:!0,onClose:x=>{x.preventDefault(),b($)},children:$})},$),S=s.map(P);return h(ee,{children:[a("span",{style:{marginBottom:16},children:S}),c&&a(Q,{ref:m,type:"text",size:"small",style:{width:78},value:f,onChange:d,onBlur:w,onPressEnter:w,...Y}),!c&&s.length<e&&h(j,{onClick:g,className:"chat-tag-new",children:[a(Gn,{})," ",r]})]})},ss={title:"",url:"",enable:!0,tags:[],category:""},is=({record:e},t)=>{const[n]=T.useForm();return l.useImperativeHandle(t,()=>({form:n})),l.useEffect(()=>{e&&n.setFieldsValue(e)},[e]),h(T,{form:n,labelCol:{span:4},initialValues:ss,children:[a(T.Item,{label:"Title",name:"title",rules:[{required:!0,message:"Please enter a title!"}],children:a(Q,{placeholder:"Please enter a title",...Y})}),a(T.Item,{label:"URL",name:"url",rules:[{required:!0,message:"Please enter the URL"},{type:"url"}],children:a(Q,{placeholder:"Please enter the URL",...Y})}),a(T.Item,{label:"Category",name:"category",rules:[{required:!0,message:"Please enter a category"}],children:a(Q,{placeholder:"Please enter a category",...Y})}),a(T.Item,{label:"Tags",name:"tags",children:a(vn,{value:e==null?void 0:e.tags})}),a(T.Item,{label:"Enable",name:"enable",valuePropName:"checked",children:a(q,{})})]})},os=l.forwardRef(is);function ls(){const e=l.useRef(null),[t,n]=l.useState(!1),{opData:r,opInit:s,opAdd:i,opReplace:c,opReplaceItems:p,opRemove:f,opRemoveItems:o,opSafeKey:m}=we([]),{columns:b,...g}=be(rs()),{rowSelection:d,selectedRowIDs:w,rowReset:P}=Pe(),{json:S,updateJson:$}=ze(He),y=d.selectedRowKeys||[];l.useEffect(()=>{!S||S.length<=0||s(S)},[S==null?void 0:S.length]),l.useEffect(()=>{var z;if(g.opType&&(["edit","new"].includes(g.opType)&&n(!0),["delete"].includes(g.opType))){const I=f((z=g==null?void 0:g.opRecord)==null?void 0:z[m]);$(I),g.resetRecord()}},[g.opType,e]);const x=()=>{n(!1),g.resetRecord()};l.useEffect(()=>{var z;if(g.opType==="enable"){const I=c((z=g==null?void 0:g.opRecord)==null?void 0:z[m],g==null?void 0:g.opRecord);$(I)}},[g.opTime]);const C=()=>{const z=o(w);$(z),P(),B.success("All selected URLs have been deleted")},v=()=>{var z,I;(I=(z=e.current)==null?void 0:z.form)==null||I.validateFields().then(async M=>{var k,E;let H=r.findIndex(R=>R.url===M.url);if(M.url===((k=g==null?void 0:g.opRecord)==null?void 0:k.url)&&(H=-1),H===-1){if(g.opType==="new"){const R=i(M);await $(R),s(R),B.success("Data added successfully")}if(g.opType==="edit"){const R=c((E=g==null?void 0:g.opRecord)==null?void 0:E[m],M);await $(R),B.success("Data updated successfully")}x()}else{const R=r[H];B.error(h("div",{style:{width:360},children:[a("div",{children:h("b",{children:[R.title,": ",R.url]})}),a("div",{children:"This URL already exists, please edit it and try again."})]}))}})},_=z=>{const I=p(w,{enable:z});$(I)},A=()=>{V("wa_window",{label:"awesome_preview",url:"index.html?type=preview",title:"Preview Dashboard"})},L=`${{new:"Create",edit:"Edit"}[g.opType]} URL`;return h("div",{children:[h("div",{className:"chat-table-btns",children:[h("div",{children:[a(W,{className:"chat-add-btn",type:"primary",onClick:g.opNew,children:"Add URL"}),a(W,{type:"dashed",onClick:A,children:"Preview Dashboard"}),a(cs,{})]}),a("div",{children:y.length>0&&h(ee,{children:[a(W,{type:"primary",onClick:()=>_(!0),children:"Enable"}),a(W,{onClick:()=>_(!1),children:"Disable"}),a(oe,{overlayStyle:{width:250},title:"URLs cannot be recovered after deletion, are you sure you want to delete them?",placement:"topLeft",onConfirm:C,okText:"Yes",cancelText:"No",children:a(W,{children:"Delete"})}),h("span",{className:"num",children:["Selected ",y.length," items"]})]})})]}),a(de,{paths:He}),a(Z,{rowKey:"url",columns:b,scroll:{x:800},dataSource:r,rowSelection:d,pagination:_e}),a(Me,{open:t,title:L,onCancel:x,onOk:v,destroyOnClose:!0,maskClosable:!1,children:a(os,{ref:e,record:g==null?void 0:g.opRecord})})]})}const cs=()=>{const e=It(),t=n=>{e(`/settings?type=${n}`)};return a(ie,{overlayInnerStyle:{width:400},title:h("div",{className:"awesome-tips",children:["Click the button to preview, and in",a(Te,{to:"/settings",children:" Settings "}),"you can set a single URL or Dashboard as the default window for the app.",a("br",{}),a(j,{onClick:()=>t("main_window"),color:"blue",children:"Main Window"}),"or ",a(j,{onClick:()=>t("tray_window"),color:"blue",children:"SystemTray Window"})]}),children:a(ue,{style:{marginLeft:5,color:"#1677ff"}})})};function xt(e,t=wn){const[n,r]=l.useState({});return J(async()=>{const i=await De(t,{defaultVal:{name:"ChatGPT Model",[e]:null}});r(i)}),{modelJson:n,modelSet:async i=>{const c=Ne.clone(n);c[e]=i,await Ge(t,c),r(c)},modelData:(n==null?void 0:n[e])||[]}}function Ke(e=""){const[t,n]=l.useState([]);l.useEffect(()=>{e&&(async()=>{const i=await De(e,{isRoot:!0,isList:!0});n(i)})()},[e]);const r=async(i,c="")=>{await Ge(c||e,i,{isRoot:!0}),n(i),await s()},s=async()=>{const i=await V("cmd_list");await Ge(Hr,{name:"ChatGPT CMD",last_updated:Date.now(),data:i}),await V("window_reload",{label:"core"}),await V("window_reload",{label:"tray"})};return{modelCacheJson:t,modelCacheSet:r,modelCacheCmd:s}}const ds=()=>[{title:"/{cmd}",dataIndex:"cmd",fixed:"left",width:120,key:"cmd",render:e=>h(j,{color:"#2a2a2a",children:["/",e]})},{title:"Act",dataIndex:"act",key:"act",width:200},{title:"Tags",dataIndex:"tags",key:"tags",width:150,render:e=>a("span",{className:"chat-prompts-tags",children:e==null?void 0:e.map(t=>a(j,{children:t},t))})},{title:"Enable",dataIndex:"enable",key:"enable",width:80,render:(e=!1,t,n)=>a(q,{checked:e,onChange:r=>n.setRecord({...t,enable:r},"enable")})},Z.EXPAND_COLUMN,{title:"Prompt",dataIndex:"prompt",key:"prompt",width:300,render:e=>a("span",{className:"chat-prompts-val",children:e})},{title:"Action",key:"action",fixed:"right",width:120,render:(e,t,n)=>h(xe,{size:"middle",children:[a("a",{onClick:()=>n.setRecord(t,"edit"),children:"Edit"}),a(oe,{title:"Are you sure to delete this model?",onConfirm:()=>n.setRecord(t,"delete"),okText:"Yes",cancelText:"No",children:a("a",{children:"Delete"})})]})}],us={act:"",enable:!0,tags:[],prompt:""},hs=({record:e},t)=>{const[n]=T.useForm();return l.useImperativeHandle(t,()=>({form:n})),l.useEffect(()=>{e&&n.setFieldsValue(e)},[e]),h(T,{form:n,labelCol:{span:4},initialValues:us,children:[a(T.Item,{label:"/{cmd}",name:"cmd",rules:[{required:!0,message:"Please enter the {cmd}!"}],children:a(Q,{placeholder:"Please enter the {cmd}",...Y})}),a(T.Item,{label:"Act",name:"act",rules:[{required:!0,message:"Please enter the Act!"}],children:a(Q,{placeholder:"Please enter the Act",...Y})}),a(T.Item,{label:"Tags",name:"tags",children:a(vn,{value:e==null?void 0:e.tags})}),a(T.Item,{label:"Enable",name:"enable",valuePropName:"checked",children:a(q,{})}),a(T.Item,{label:"Prompt",name:"prompt",rules:[{required:!0,message:"Please enter a prompt!"}],children:a(Q.TextArea,{rows:4,placeholder:"Please enter a prompt",...Y})})]})},ms=l.forwardRef(hs);function ps(){var I;const{rowSelection:e,selectedRowIDs:t}=Pe(),[n,r]=l.useState(!1),[s,i]=l.useState(""),{modelJson:c,modelSet:p}=xt("user_custom"),{modelCacheJson:f,modelCacheSet:o}=Ke(s),{opData:m,opInit:b,opReplaceItems:g,opAdd:d,opRemove:w,opReplace:P,opSafeKey:S}=we([]),{columns:$,...y}=be(ds()),x=(I=c==null?void 0:c.user_custom)==null?void 0:I.last_updated,C=e.selectedRowKeys||[],v=l.useRef(null);J(async()=>{i(await G.join(await U(),"cache_model","user_custom.json"))}),l.useEffect(()=>{f.length<=0||b(f)},[f.length]),l.useEffect(()=>{var M;if(y.opType&&(["edit","new"].includes(y.opType)&&r(!0),["delete"].includes(y.opType))){const H=w((M=y==null?void 0:y.opRecord)==null?void 0:M[S]);o(H),y.resetRecord()}},[y.opType,v]),l.useEffect(()=>{var M;if(y.opType==="enable"){const H=P((M=y==null?void 0:y.opRecord)==null?void 0:M[S],y==null?void 0:y.opRecord);o(H)}},[y.opTime]);const _=M=>{const H=g(t,{enable:M});o(H)},A=()=>{r(!1),y.resetRecord()},L=()=>{var M,H;(H=(M=v.current)==null?void 0:M.form)==null||H.validateFields().then(async k=>{var R,D;if(f.map(F=>F.cmd).includes(k.cmd)&&((R=y==null?void 0:y.opRecord)==null?void 0:R.cmd)!==k.cmd){B.warning(`"cmd: /${k.cmd}" already exists, please change the "${k.cmd}" name and resubmit.`);return}let E=[];switch(y.opType){case"new":E=d(k);break;case"edit":E=P((D=y==null?void 0:y.opRecord)==null?void 0:D[S],k);break}await o(E),b(E),p({id:"user_custom",last_updated:Date.now()}),A()})},z=`${{new:"Create",edit:"Edit"}[y.opType]} Model`;return h("div",{children:[h("div",{className:"chat-table-btns",children:[a(W,{className:"chat-add-btn",type:"primary",onClick:y.opNew,children:"Add Model"}),a("div",{children:C.length>0&&h(ee,{children:[a(W,{type:"primary",onClick:()=>_(!0),children:"Enable"}),a(W,{onClick:()=>_(!1),children:"Disable"}),h("span",{className:"num",children:["Selected ",C.length," items"]})]})})]}),h("div",{className:"chat-table-tip",children:[a(de,{label:"CACHE",paths:"cache_model/user_custom.json"}),x&&h("span",{style:{marginLeft:10,color:"#888",fontSize:12},children:["Last updated on ",Se(x)]})]}),a(Z,{rowKey:"cmd",columns:$,scroll:{x:"auto"},dataSource:m,rowSelection:e,pagination:_e,expandable:{expandedRowRender:M=>a("div",{style:{padding:10},children:M.prompt})}},x),a(Me,{open:n,onCancel:A,title:z,onOk:L,destroyOnClose:!0,maskClosable:!1,children:a(ms,{record:y==null?void 0:y.opRecord,ref:v})})]})}const fs=()=>[{title:"/{cmd}",dataIndex:"cmd",fixed:"left",key:"cmd",render:(e,t)=>h(j,{color:"#2a2a2a",children:["/",_t(t.act)]})},{title:"Act",dataIndex:"act",key:"act"},{title:"Tags",dataIndex:"tags",key:"tags",render:()=>a(j,{children:"chatgpt-prompts"})},{title:"Enable",dataIndex:"enable",key:"enable",render:(e=!1,t,n)=>a(q,{checked:e,onChange:r=>n.setRecord({...t,enable:r},"enable")})},Z.EXPAND_COLUMN,{title:"Prompt",dataIndex:"prompt",key:"prompt",render:e=>a("span",{className:"chat-prompts-val",children:e})}];const ys="https://github.com/f/awesome-chatgpt-prompts/blob/main/prompts.csv";function gs(){var x;const{rowSelection:e,selectedRowIDs:t}=Pe(),[n,r]=l.useState(""),{modelJson:s,modelSet:i}=xt("sync_prompts"),{modelCacheJson:c,modelCacheSet:p}=Ke(n),{opData:f,opInit:o,opReplace:m,opReplaceItems:b,opSafeKey:g}=we([]),{columns:d,...w}=be(fs()),P=(x=s==null?void 0:s.sync_prompts)==null?void 0:x.last_updated,S=e.selectedRowKeys||[];J(async()=>{r(await G.join(await U(),"cache_model","chatgpt_prompts.json"))}),l.useEffect(()=>{c.length<=0||o(c)},[c.length]);const $=async()=>{const C=await V("sync_prompts",{time:Date.now()});C&&(o(C),i({id:"chatgpt_prompts",last_updated:Date.now()}))};l.useEffect(()=>{var C;if(w.opType==="enable"){const v=m((C=w==null?void 0:w.opRecord)==null?void 0:C[g],w==null?void 0:w.opRecord);p(v)}},[w.opTime]);const y=C=>{const v=b(t,{enable:C});p(v)};return h("div",{children:[h("div",{className:"chat-table-btns",children:[a(oe,{overlayStyle:{width:250},title:"Sync will overwrite the previous data, confirm to sync?",placement:"topLeft",onConfirm:$,okText:"Yes",cancelText:"No",children:a(W,{type:"primary",children:"Sync"})}),a("div",{children:S.length>0&&h(ee,{children:[a(W,{type:"primary",onClick:()=>y(!0),children:"Enable"}),a(W,{onClick:()=>y(!1),children:"Disable"}),h("span",{className:"num",children:["Selected ",S.length," items"]})]})})]}),h("div",{className:"chat-table-tip",children:[h("div",{className:"chat-sync-path",children:[a(de,{url:ys,content:"f/awesome-chatgpt-prompts/prompts.csv"}),a(de,{label:"CACHE",paths:"cache_model/chatgpt_prompts.json"})]}),P&&h("span",{style:{marginLeft:10,color:"#888",fontSize:12},children:["Last updated on ",Se(P)]})]}),a(Z,{rowKey:"act",columns:d,scroll:{x:"auto"},dataSource:f,rowSelection:e,pagination:_e,expandable:{expandedRowRender:C=>a("div",{style:{padding:10},children:C.prompt})}},P)]})}const ws=()=>[{title:"Name",dataIndex:"name",key:"name",width:100},{title:"Protocol",dataIndex:"protocol",key:"protocol",width:80,render:e=>a(j,{children:e})},{title:"PATH",dataIndex:"path",key:"path",width:180,render:(e,t)=>a(bs,{row:t})},{title:"Last updated",dataIndex:"last_updated",key:"last_updated",width:140,render:e=>h("div",{children:[a(Vn,{style:{marginRight:5,color:e?"#52c41a":"#ff4d4f"}}),e?Se(e):""]})},{title:"Action",fixed:"right",width:150,render:(e,t,n)=>h(xe,{children:[a(oe,{overlayStyle:{width:250},title:"Sync will overwrite the previous data, confirm to sync?",onConfirm:()=>n.setRecord(t,"sync"),okText:"Yes",cancelText:"No",children:a("a",{children:"Sync"})}),t.last_updated&&a(Te,{to:`${t.id}`,state:t,children:"View"}),a("a",{onClick:()=>n.setRecord(t,"edit"),children:"Edit"}),a(oe,{title:"Are you sure to delete this path?",onConfirm:()=>n.setRecord(t,"delete"),okText:"Yes",cancelText:"No",children:a("a",{children:"Delete"})})]})}],bs=({row:e})=>{const[t,n]=l.useState("");return J(async()=>{n(await St(e))}),a("a",{onClick:()=>ge.open(t),children:t})},St=async e=>/^http/.test(e.protocol)?`${e.protocol}://${e.path}.${e.ext}`:await G.join(await U(),e.path)+`.${e.ext}`,_s={act:"",enable:!0,tags:[],prompt:""},vs=({record:e,type:t},n)=>{const r=t==="edit",[s]=T.useForm();l.useImperativeHandle(n,()=>({form:s}));const[i,c]=l.useState("");J(async()=>{c(await U())}),l.useEffect(()=>{e&&s.setFieldsValue(e)},[e]);const p=a(T.Item,{noStyle:!0,name:"protocol",initialValue:"https",children:h(se,{disabled:r,children:[a(se.Option,{value:"local",children:i}),a(se.Option,{value:"http",children:"http://"}),a(se.Option,{value:"https",children:"https://"})]})}),f=a(T.Item,{noStyle:!0,name:"ext",initialValue:"json",children:h(se,{disabled:r,children:[a(se.Option,{value:"csv",children:".csv"}),a(se.Option,{value:"json",children:".json"})]})}),o=a(ie,{title:a("pre",{children:JSON.stringify([{cmd:"",act:"",prompt:""},{cmd:"",act:"",prompt:""}],null,2)}),children:a("a",{children:"JSON"})}),m=a(ie,{title:a("pre",{children:`"cmd","act","prompt"
"cmd","act","prompt"
"cmd","act","prompt"
"cmd","act","prompt"`}),children:a("a",{children:"CSV"})});return h(ee,{children:[h(T,{form:s,labelCol:{span:4},initialValues:_s,children:[a(T.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please enter a name!"}],children:a(Q,{placeholder:"Please enter a name",...Y})}),a(T.Item,{label:"PATH",name:"path",rules:[{required:!0,message:"Please enter the path!"}],children:a(Q,{placeholder:"YOUR_PATH",addonBefore:p,addonAfter:f,...Y})}),a(T.Item,{style:{display:"none"},name:"id",initialValue:Ft().replace(/-/g,""),children:a("input",{})})]}),a("div",{className:"tip",children:h("p",{children:["The file supports only ",m," and ",o," formats."]})})]})},xs=l.forwardRef(vs),Mt=(e=[])=>(Array.isArray(e)?e:[]).map(t=>({...t,cmd:t.cmd?t.cmd:_t(t.act),tags:["user-sync"],enable:!0}));function Ss(){const[e,t]=l.useState(!1),{modelData:n,modelSet:r}=xt("sync_custom",wn),{modelCacheCmd:s,modelCacheSet:i}=Ke(),{opData:c,opInit:p,opAdd:f,opRemove:o,opReplace:m,opSafeKey:b}=we([]),{columns:g,...d}=be(ws()),w=l.useRef(null),P=()=>{t(!1),d.resetRecord()};l.useEffect(()=>{n.length<=0||p(n)},[n]),l.useEffect(()=>{var y;if(d.opType){if(d.opType==="sync"){const x=`${(y=d==null?void 0:d.opRecord)==null?void 0:y.id}.json`;S(x).then(C=>{var _;if(d.resetRecord(),!C)return;const v=m((_=d==null?void 0:d.opRecord)==null?void 0:_[b],{...d==null?void 0:d.opRecord,last_updated:Date.now()});r(v),d.resetRecord()})}["edit","new"].includes(d.opType)&&t(!0),["delete"].includes(d.opType)&&(async()=>{var C,v;try{const _=await G.join(await U(),"cache_model",`${(C=d==null?void 0:d.opRecord)==null?void 0:C.id}.json`);await X.removeFile(_)}catch{}const x=o((v=d==null?void 0:d.opRecord)==null?void 0:v[b]);r(x),d.resetRecord(),s()})()}},[d.opType,w]);const S=async y=>{const x=d==null?void 0:d.opRecord,C=/json$/.test(x==null?void 0:x.ext),v=await G.join(await U(),"cache_model",y),_=await St(x);if(/^http/.test(x==null?void 0:x.protocol)){const A=await V("sync_user_prompts",{url:_,dataType:x==null?void 0:x.ext});return A?(await i(A,v),await s(),B.success("ChatGPT Prompts data has been synchronized!"),!0):(B.error("ChatGPT Prompts data sync failed, please try again!"),!1)}if(C){const A=await De(_,{isRoot:!0});await i(Mt(A),v)}else{const A=await X.readTextFile(_),L=await V("parse_prompt",{data:A});await i(Mt(L),v)}return await s(),!0},$=()=>{var y,x;(x=(y=w.current)==null?void 0:y.form)==null||x.validateFields().then(C=>{var v;if(d.opType==="new"){const _=f(C);r(_),B.success("Data added successfully")}if(d.opType==="edit"){const _=m((v=d==null?void 0:d.opRecord)==null?void 0:v[b],C);r(_),B.success("Data updated successfully")}P()})};return h("div",{children:[a(W,{style:{marginBottom:10},className:"chat-add-btn",type:"primary",onClick:d.opNew,children:"Add PATH"}),a(Z,{rowKey:"name",columns:g,scroll:{x:800},dataSource:c,pagination:_e},"id"),a(Me,{open:e,onCancel:P,title:"Sync PATH",onOk:$,destroyOnClose:!0,maskClosable:!1,children:a(xs,{ref:w,record:d==null?void 0:d.opRecord,type:d.opType})})]})}const Ps=()=>[{title:"/{cmd}",dataIndex:"cmd",fixed:"left",key:"cmd",render:(e,t)=>h(j,{color:"#2a2a2a",children:["/",t.cmd?t.cmd:_t(t.act)]})},{title:"Act",dataIndex:"act",key:"act"},{title:"Tags",dataIndex:"tags",key:"tags",render:e=>a("span",{className:"chat-prompts-tags",children:e==null?void 0:e.map(t=>a(j,{children:t},t))})},{title:"Enable",dataIndex:"enable",key:"enable",render:(e=!1,t,n)=>a(q,{checked:e,onChange:r=>n.setRecord({...t,enable:r},"enable")})},Z.EXPAND_COLUMN,{title:"Prompt",dataIndex:"prompt",key:"prompt",render:e=>a("span",{className:"chat-prompts-val",children:e})}];function $s(){const e=dt(),[t,n]=l.useState(""),[r,s]=l.useState(""),i=e==null?void 0:e.state,{rowSelection:c,selectedRowIDs:p}=Pe(),{modelCacheJson:f,modelCacheSet:o}=Ke(r),{opData:m,opInit:b,opReplace:g,opReplaceItems:d,opSafeKey:w}=we([]),{columns:P,...S}=be(Ps()),$=c.selectedRowKeys||[];J(async()=>{n(await St(i)),s(await G.join(await U(),"cache_model",`${i==null?void 0:i.id}.json`))}),l.useEffect(()=>{f.length<=0||b(f)},[f.length]),l.useEffect(()=>{var x;if(S.opType==="enable"){const C=g((x=S==null?void 0:S.opRecord)==null?void 0:x[w],S==null?void 0:S.opRecord);o(C)}},[S.opTime]);const y=x=>{const C=d(p,{enable:x});o(C)};return h("div",{children:[h("div",{className:"chat-table-btns",children:[a("div",{children:a(W,{shape:"round",icon:a(Wt,{}),onClick:()=>history.back()})}),a("div",{children:$.length>0&&h(ee,{children:[a(W,{type:"primary",onClick:()=>y(!0),children:"Enable"}),a(W,{onClick:()=>y(!1),children:"Disable"}),h("span",{className:"num",children:["Selected ",$.length," items"]})]})})]}),h("div",{className:"chat-table-tip",children:[h("div",{className:"chat-sync-path",children:[a(de,{url:t}),a(de,{label:"CACHE",paths:`cache_model/${i==null?void 0:i.id}.json`})]}),(i==null?void 0:i.last_updated)&&h("span",{style:{marginLeft:10,color:"#888",fontSize:12},children:["Last updated on ",Se(i==null?void 0:i.last_updated)]})]}),a(Z,{rowKey:"act",columns:P,scroll:{x:"auto"},dataSource:m,rowSelection:c,pagination:_e,expandable:{expandedRowRender:x=>a("div",{style:{padding:10},children:x.prompt})}},"prompt")]})}const Cs={pdf:"blue",png:"orange"},Rs=()=>[{title:"Name",dataIndex:"name",fixed:"left",key:"name",width:240,render:(e,t,n)=>a(_n,{rowKey:"name",row:t,actions:n})},{title:"Extension",dataIndex:"ext",key:"ext",width:120,render:e=>a(j,{color:Cs[e],children:e})},{title:"Path",dataIndex:"path",key:"path",width:200,render:(e,t)=>a(ks,{row:t})},{title:"Created",dataIndex:"created",key:"created",width:150,render:Se},{title:"Action",fixed:"right",width:150,render:(e,t,n)=>h(xe,{children:[a("a",{onClick:()=>n.setRecord(t,"preview"),children:"Preview"}),a(oe,{title:"Are you sure to delete this file?",onConfirm:()=>n.setRecord(t,"delete"),okText:"Yes",cancelText:"No",children:a("a",{children:"Delete"})})]})}],ks=({row:e})=>{const[t,n]=l.useState("");return J(async()=>{n(await Ts(e))}),a("a",{onClick:()=>ge.open(t),children:t})},Ts=async e=>{const t=["png"].includes(e==null?void 0:e.ext);return await G.join(await U(),"download",t?"img":e.ext,e.id)+`.${e.ext}`};function Es(e,t){const n={pdf:"application/pdf",png:"image/png"}[t];return URL.createObjectURL(new Blob([e],{type:n}))}function As(){var C;const[e,t]=l.useState(""),[n,r]=l.useState(!1),{opData:s,opInit:i,opReplace:c,opSafeKey:p}=we([]),{columns:f,...o}=be(Rs()),{rowSelection:m,selectedRows:b,rowReset:g}=Pe({rowType:"row"}),{json:d,refreshJson:w,updateJson:P}=ze(Qe),S=m.selectedRowKeys||[];l.useEffect(()=>{!d||d.length<=0||i(d)},[d==null?void 0:d.length]),l.useEffect(()=>{o.opType&&(async()=>{var L;const v=o==null?void 0:o.opRecord,_=["png"].includes(v==null?void 0:v.ext),A=await G.join(await U(),"download",_?"img":v==null?void 0:v.ext,`${v==null?void 0:v.id}.${v==null?void 0:v.ext}`);if(o.opType==="preview"){const z=await X.readBinaryFile(A),I=Es(z,v==null?void 0:v.ext);t(I),r(!0);return}if(o.opType==="delete"&&(await X.removeFile(A),await y()),o.opType==="rowedit"){const z=c((L=o==null?void 0:o.opRecord)==null?void 0:L[p],o==null?void 0:o.opRecord);await P(z),B.success("Name has been changed!")}o.resetRecord()})()},[o.opType]);const $=async()=>{if((s==null?void 0:s.length)===b.length){const _=await G.join(await U(),"download");await X.removeDir(_,{recursive:!0}),await y(),B.success("All files have been cleared!");return}const v=b.map(async _=>{const A=["png"].includes(_==null?void 0:_.ext),L=await G.join(await U(),"download",A?"img":_==null?void 0:_.ext,`${_==null?void 0:_.id}.${_==null?void 0:_.ext}`);return await X.removeFile(L),L});Promise.all(v).then(async()=>{await y(),B.success("All files selected are cleared!")})},y=async()=>{await V("download_list",{pathname:Qe,dir:"download"}),g();const v=await w();i(v)},x=()=>{r(!1),o.resetRecord()};return h("div",{children:[a("div",{className:"chat-table-btns",children:a("div",{children:S.length>0&&h(ee,{children:[a(oe,{overlayStyle:{width:250},title:"Files cannot be recovered after deletion, are you sure you want to delete them?",placement:"topLeft",onConfirm:$,okText:"Yes",cancelText:"No",children:a(W,{children:"Delete"})}),h("span",{className:"num",children:["Selected ",S.length," items"]})]})})}),a(de,{paths:Qe}),a(Z,{rowKey:"id",columns:f,scroll:{x:800},dataSource:s,rowSelection:m,pagination:_e}),a(Me,{open:n,title:a("div",{children:((C=o==null?void 0:o.opRecord)==null?void 0:C.name)||""}),onCancel:x,footer:!1,destroyOnClose:!0,children:a("img",{style:{maxWidth:"100%"},src:e})})]})}const Ms=()=>[{title:"Name",dataIndex:"name",fixed:"left",key:"name",width:240,render:(e,t,n)=>a(_n,{rowKey:"name",row:t,actions:n})},{title:"Path",dataIndex:"path",key:"path",width:200,render:(e,t)=>a(Ds,{row:t})},{title:"Created",dataIndex:"created",key:"created",width:150,render:Se},{title:"Action",fixed:"right",width:160,render:(e,t,n)=>h(xe,{children:[a("a",{onClick:()=>n.setRecord(t,"preview"),children:"Preview"}),a(Te,{to:`/md/${t.id}`,state:t,children:"Edit"}),a(oe,{title:"Are you sure to delete this file?",onConfirm:()=>n.setRecord(t,"delete"),okText:"Yes",cancelText:"No",children:a("a",{children:"Delete"})})]})}],Ds=({row:e})=>{const[t,n]=l.useState("");return J(async()=>{n(await xn(e))}),a("a",{onClick:()=>ge.open(t),children:t})},xn=async e=>await G.join(await U(),"notes",e.id)+`.${e.ext}`;function zs(){var C;const[e,t]=l.useState(""),[n,r]=l.useState(!1),{opData:s,opInit:i,opReplace:c,opSafeKey:p}=we([]),{columns:f,...o}=be(Ms()),{rowSelection:m,selectedRows:b,rowReset:g}=Pe({rowType:"row"}),{json:d,refreshJson:w,updateJson:P}=ze(Ze),S=m.selectedRowKeys||[];l.useEffect(()=>{!d||d.length<=0||i(d)},[d==null?void 0:d.length]),l.useEffect(()=>{o.opType&&(async()=>{var A;const v=o==null?void 0:o.opRecord,_=await G.join(await U(),"notes",`${v==null?void 0:v.id}.${v==null?void 0:v.ext}`);if(o.opType==="preview"){const L=await X.readTextFile(_);t(L),r(!0);return}if(o.opType==="delete"&&(await X.removeFile(_),await y()),o.opType==="rowedit"){const L=c((A=o==null?void 0:o.opRecord)==null?void 0:A[p],o==null?void 0:o.opRecord);await P(L),B.success("Name has been changed!")}o.resetRecord()})()},[o.opType]);const $=async()=>{if((s==null?void 0:s.length)===b.length){const _=await G.join(await U(),"notes");await X.removeDir(_,{recursive:!0}),await y(),B.success("All files have been cleared!");return}const v=b.map(async _=>{const A=await G.join(await U(),"notes",`${_==null?void 0:_.id}.${_==null?void 0:_.ext}`);return await X.removeFile(A),A});Promise.all(v).then(async()=>{await y(),B.success("All files selected are cleared!")})},y=async()=>{await V("download_list",{pathname:Ze,dir:"notes"}),g();const v=await w();i(v)},x=()=>{r(!1),o.resetRecord()};return h("div",{children:[a("div",{className:"chat-table-btns",children:a("div",{children:S.length>0&&h(ee,{children:[a(oe,{overlayStyle:{width:250},title:"Files cannot be recovered after deletion, are you sure you want to delete them?",placement:"topLeft",onConfirm:$,okText:"Yes",cancelText:"No",children:a(W,{children:"Delete"})}),h("span",{className:"num",children:["Selected ",S.length," items"]})]})})}),a(de,{paths:Ze}),a(Z,{rowKey:"id",columns:f,scroll:{x:800},dataSource:s,rowSelection:m,pagination:_e}),a(Me,{open:n,title:a("div",{children:((C=o==null?void 0:o.opRecord)==null?void 0:C.name)||""}),onCancel:x,footer:!1,destroyOnClose:!0,width:600,children:a(vt,{children:e})})]})}const Ls=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ns=Ls?l.useLayoutEffect:()=>{};var ke=Ns;let Os=0;function Pt(e=null){const t=typeof l.useId=="function"?l.useId():null,n=l.useRef(e||t||null);return n.current===null&&(n.current=""+Os++),n.current}const Je=l.createContext(null);Je.displayName="PanelGroupContext";function Sn({children:e=null,className:t="",collapsible:n=!1,defaultSize:r=null,forwardedRef:s,id:i=null,maxSize:c=100,minSize:p=10,onCollapse:f=null,onResize:o=null,order:m=null,style:b={},tagName:g="div"}){const d=l.useContext(Je);if(d===null)throw Error("Panel components must be rendered within a PanelGroup container");const w=Pt(i),{collapsePanel:P,expandPanel:S,getPanelStyle:$,registerPanel:y,resizePanel:x,unregisterPanel:C}=d,v=l.useRef({onCollapse:f,onResize:o});if(l.useEffect(()=>{v.current.onCollapse=f,v.current.onResize=o}),p<0||p>100)throw Error(`Panel minSize must be between 0 and 100, but was ${p}`);if(c<0||c>100)throw Error(`Panel maxSize must be between 0 and 100, but was ${c}`);if(r!==null){if(r<0||r>100)throw Error(`Panel defaultSize must be between 0 and 100, but was ${r}`);p>r&&!n&&(console.error(`Panel minSize ${p} cannot be greater than defaultSize ${r}`),r=p)}ke(()=>(y(w,{callbacksRef:v,collapsible:n,defaultSize:r,id:w,maxSize:c,minSize:p,order:m}),()=>{C(w)}),[n,r,w,c,p,m,y,C]);const _=$(w),A=l.useRef({size:Dt(_)});return ke(()=>{A.current.size=Dt(_)}),l.useImperativeHandle(s,()=>({collapse:()=>P(w),expand:()=>S(w),getCollapsed(){return A.current.size===0},getSize(){return A.current.size},resize:L=>x(w,L)}),[P,S,w,x]),l.createElement(g,{children:e,className:t,"data-panel":"","data-panel-collapsible":n||void 0,"data-panel-id":w,"data-panel-size":parseFloat(""+_.flexGrow).toFixed(1),id:`data-panel-id-${w}`,style:{..._,...b}})}const lt=l.forwardRef((e,t)=>l.createElement(Sn,{...e,forwardedRef:t}));Sn.displayName="Panel";lt.displayName="forwardRef(Panel)";function Dt(e){const{flexGrow:t}=e;return typeof t=="string"?parseFloat(t):t}function Pn(e){return e.map(t=>{const{minSize:n,order:r}=t;return r?`${r}:${n}`:`${n}`}).sort((t,n)=>t.localeCompare(n)).join(",")}function $n(e){try{const t=localStorage.getItem(`PanelGroup:sizes:${e}`);if(t){const n=JSON.parse(t);if(typeof n=="object"&&n!=null)return n}}catch{}return null}function Is(e,t){const n=$n(e);if(n){const r=Pn(t);return n[r]||null}return null}function Fs(e,t,n){const r=Pn(t),s=$n(e)||{};s[r]=n;try{localStorage.setItem(`PanelGroup:sizes:${e}`,JSON.stringify(s))}catch(i){console.error(i)}}const ye=10;function Re(e,t,n,r,s,i,c){if(s===0)return i;const p=re(t),f=i.concat();let o=0;{const g=s<0?r:n,d=p.findIndex($=>$.id===g),w=p[d],P=i[d],S=zt(w,Math.abs(s),P,e);if(P===S)return i;S===0&&P>0&&c.set(g,P),s=s<0?P-S:S-P}let m=s<0?n:r,b=p.findIndex(g=>g.id===m);for(;;){const g=p[b],d=i[b],w=zt(g,0-Math.abs(s),d,e);if(d!==w&&(w===0&&d>0&&c.set(g.id,d),o+=d-w,f[b]=w,o.toPrecision(ye)>=s.toPrecision(ye)))break;if(s<0){if(--b<0)break}else if(++b>=p.length)break}return o===0?i:(m=s<0?r:n,b=p.findIndex(g=>g.id===m),f[b]=i[b]+o,f)}function $e(e,t,n){n.forEach((r,s)=>{const i=t[s];if(i!==r){const{callbacksRef:c,collapsible:p}=e[s],{onCollapse:f,onResize:o}=c.current;o&&o(r),p&&f&&(!i&&r!==0?f(!1):i!==0&&r===0&&f(!0))}})}function et(e,t){if(t.length<2)return[null,null];const n=t.findIndex(c=>c.id===e);if(n<0)return[null,null];const r=n===t.length-1,s=r?t[n-1].id:e,i=r?e:t[n+1].id;return[s,i]}function Cn(e,t,n){if(e.size===1)return"100";const s=re(e).findIndex(c=>c.id===t),i=n[s];return i==null?"0":i.toPrecision(ye)}function Ws(e){const t=document.querySelector(`[data-panel-id="${e}"]`);return t||null}function $t(e){const t=document.querySelector(`[data-panel-group-id="${e}"]`);return t||null}function Ct(e){const t=document.querySelector(`[data-panel-resize-handle-id="${e}"]`);return t||null}function js(e){return Rn().findIndex(r=>r.getAttribute("data-panel-resize-handle-id")===e)||null}function Rn(){return Array.from(document.querySelectorAll("[data-panel-resize-handle-id]"))}function kn(e){return Array.from(document.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${e}"]`))}function Rt(e,t,n){var f,o;const r=Ct(t),i=kn(e).indexOf(r),c=((f=n[i])==null?void 0:f.id)||null,p=((o=n[i+1])==null?void 0:o.id)||null;return[c,p]}function re(e){return Array.from(e.values()).sort((t,n)=>t.order-n.order)}function zt(e,t,n,r){var c;const s=n+t;if(e.collapsible){if(n>0){if(s<=0)return 0}else if(!((c=r==null?void 0:r.type)==null?void 0:c.startsWith("key"))&&s<e.minSize)return 0}return Math.min(e.maxSize,Math.max(e.minSize,s))}function Tn(e,t,n,r=0){const s=n==="horizontal";let i=0;if(Gs(e))i=s?e.clientX:e.clientY;else if(Vs(e)){const o=e.touches[0];i=s?o.screenX:o.screenY}else return 0;const p=Ct(t).getBoundingClientRect(),f=s?p.left:p.top;return i-f-r}function Us(e,t,n,r,s,i,c){if(Hs(e)){const p=s==="horizontal",o=$t(t).getBoundingClientRect(),m=p?o.width:o.height,b=e.shiftKey?10:100,g=m/b;let d=0;switch(e.key){case"ArrowDown":d=p?0:g;break;case"ArrowLeft":d=p?-g:0;break;case"ArrowRight":d=p?g:0;break;case"ArrowUp":d=p?0:-g;break;case"End":d=m;break;case"Home":d=-m;break}const[w,P]=Rt(t,n,r),S=d<0?w:P,$=r.findIndex(x=>x.id===S),y=r[$];if(y.collapsible){const x=i[$];(x===0||x.toPrecision(ye)===y.minSize.toPrecision(ye))&&(d=d<0?-y.minSize*m:y.minSize*m)}return d}else return Tn(e,n,s,c)}function Hs(e){return e.type==="keydown"}function Gs(e){return e.type.startsWith("mouse")}function Vs(e){return e.type.startsWith("touch")}function Bs({committedValuesRef:e,groupId:t,panels:n,setSizes:r,sizes:s,panelSizeBeforeCollapse:i}){l.useEffect(()=>{const{direction:c,panels:p}=e.current,f=$t(t),{height:o,width:m}=f.getBoundingClientRect(),g=kn(t).map(d=>{const w=d.getAttribute("data-panel-resize-handle-id"),P=re(p),[S,$]=Rt(t,w,P);if(S==null||$==null)return()=>{};let y=0,x=100,C=0,v=0;P.forEach(M=>{M.id===S?(x=M.maxSize,y=M.minSize):(C+=M.minSize,v+=M.maxSize)});const _=Math.min(x,100-C),A=Math.max(y,(P.length-1)*100-v),L=Cn(p,S,s);d.setAttribute("aria-valuemax",""+Math.round(_)),d.setAttribute("aria-valuemin",""+Math.round(A)),d.setAttribute("aria-valuenow",""+Math.round(parseInt(L)));const z=M=>{switch(M.key){case"Enter":{const H=P.findIndex(k=>k.id===S);if(H>=0){const k=P[H],E=s[H];if(E!=null){let R=0;E.toPrecision(ye)<=k.minSize.toPrecision(ye)?R=c==="horizontal"?m:o:R=-(c==="horizontal"?m:o);const D=Re(M,p,S,$,R,s,i.current);s!==D&&r(D)}}break}}};d.addEventListener("keydown",z);const I=Ws(S);return I!=null&&d.setAttribute("aria-controls",I.id),()=>{d.removeAttribute("aria-valuemax"),d.removeAttribute("aria-valuemin"),d.removeAttribute("aria-valuenow"),d.removeEventListener("keydown",z),I!=null&&d.removeAttribute("aria-controls")}});return()=>{g.forEach(d=>d())}},[t,n,s])}function Ks({disabled:e,handleId:t,resizeHandler:n}){l.useEffect(()=>{if(e||n==null)return;const r=Ct(t);if(r==null)return;const s=i=>{switch(i.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":n(i);break;case"F6":{const c=Rn(),p=js(t),f=i.shiftKey?p>0?p-1:c.length-1:p+1<c.length?p+1:0;c[f].focus();break}}};return r.addEventListener("keydown",s),()=>{r.removeEventListener("keydown",s)}},[e,t,n])}let ct=null,pe=null;function En(e){switch(e){case"horizontal":return"col-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"row-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function Js(){pe!==null&&(document.head.removeChild(pe),ct=null,pe=null)}function tt(e){if(ct===e)return;ct=e;const t=En(e);pe===null&&(pe=document.createElement("style"),document.head.appendChild(pe)),pe.innerHTML=`*{cursor: ${t}!important;}`}function qs(e,t=10){let n=null;return(...s)=>{clearTimeout(n),n=setTimeout(()=>{e(...s)},t)}}const Ys=qs(Fs,100);function An({autoSaveId:e,children:t=null,className:n="",direction:r,id:s=null,onLayout:i=null,style:c={},tagName:p="div"}){const f=Pt(s),[o,m]=l.useState(null),[b,g]=l.useState(new Map),d=l.useRef({onLayout:i});l.useEffect(()=>{d.current.onLayout=i});const[w,P]=l.useState([]),S=l.useRef(0),$=l.useRef(new Map),y=l.useRef({direction:r,panels:b,sizes:w});ke(()=>{y.current.direction=r,y.current.panels=b,y.current.sizes=w}),Bs({committedValuesRef:y,groupId:f,panels:b,setSizes:P,sizes:w,panelSizeBeforeCollapse:$}),l.useEffect(()=>{const{onLayout:k}=d.current;if(k){const{sizes:E}=y.current;E.length>0&&k(E)}},[w]);const x=l.useRef(!1);ke(()=>{if(x.current)return;const{panels:k,sizes:E}=y.current;if(E.length>0){x.current=!0;const R=re(k);$e(R,[],E)}},[w]),ke(()=>{if(y.current.sizes.length===b.size)return;let E;if(e){const R=re(b);E=Is(e,R)}if(E!=null)P(E);else{const R=re(b);let D=0,F=0,O=0;if(R.forEach(N=>{O+=N.minSize,N.defaultSize===null?D++:F+=N.defaultSize}),F>100)throw new Error("The sum of the defaultSize of all panels in a group cannot exceed 100.");if(O>100)throw new Error("The sum of the minSize of all panels in a group cannot exceed 100.");P(R.map(N=>N.defaultSize===null?(100-F)/D:N.defaultSize))}},[e,b]),l.useEffect(()=>{if(e){if(w.length===0||w.length!==b.size)return;const k=re(b);Ys(e,k,w)}},[e,b,w]);const C=l.useCallback(k=>{const{panels:E}=y.current;return E.size===0?{flexBasis:"auto",flexGrow:1,flexShrink:1,overflow:"hidden"}:{flexBasis:0,flexGrow:Cn(E,k,w),flexShrink:1,overflow:"hidden",pointerEvents:o!==null?"none":void 0}},[o,r,w]),v=l.useCallback((k,E)=>{g(R=>{if(R.has(k))return R;const D=new Map(R);return D.set(k,E),D})},[]),_=l.useCallback(k=>R=>{R.preventDefault();const{direction:D,panels:F,sizes:O}=y.current,N=re(F),[le,te]=Rt(f,k,N);if(le==null||te==null)return;const ne=Us(R,f,k,N,D,O,S.current);if(ne===0)return;const ce=$t(f).getBoundingClientRect(),ae=D==="horizontal",zn=ae?ce.width:ce.height,Ln=ne/zn*100,qe=Re(R,F,le,te,Ln,O,$.current);O===qe?tt(ae?ne<0?"horizontal-min":"horizontal-max":ne<0?"vertical-min":"vertical-max"):(tt(ae?"horizontal":"vertical"),$e(N,O,qe),P(qe))},[f]),A=l.useCallback(k=>{g(E=>{if(!E.has(k))return E;const R=new Map(E);return R.delete(k),R})},[]),L=l.useCallback(k=>{const{panels:E,sizes:R}=y.current,D=E.get(k);if(D==null||!D.collapsible)return;const F=re(E),O=F.indexOf(D);if(O<0)return;const N=R[O];if(N===0)return;$.current.set(k,N);const[le,te]=et(k,F);if(le==null||te==null)return;const Le=O===F.length-1?N:0-N,ce=Re(null,E,le,te,Le,R,$.current);R!==ce&&($e(F,R,ce),P(ce))},[]),z=l.useCallback(k=>{const{panels:E,sizes:R}=y.current,D=E.get(k);if(D==null)return;const F=$.current.get(k)||D.minSize;if(!F)return;const O=re(E),N=O.indexOf(D);if(N<0||R[N]!==0)return;const[te,ne]=et(k,O);if(te==null||ne==null)return;const ce=N===O.length-1?0-F:F,ae=Re(null,E,te,ne,ce,R,$.current);R!==ae&&($e(O,R,ae),P(ae))},[]),I=l.useCallback((k,E)=>{const{panels:R,sizes:D}=y.current,F=R.get(k);if(F==null)return;const O=re(R),N=O.indexOf(F);if(N<0)return;const le=D[N];if(le===E)return;const[te,ne]=et(k,O);if(te==null||ne==null)return;const ce=N===O.length-1?le-E:E-le,ae=Re(null,R,te,ne,ce,D,$.current);D!==ae&&($e(O,D,ae),P(ae))},[]),M=l.useMemo(()=>({activeHandleId:o,collapsePanel:L,direction:r,expandPanel:z,getPanelStyle:C,groupId:f,registerPanel:v,registerResizeHandle:_,resizePanel:I,startDragging:(k,E)=>{m(k),S.current=Tn(E,k,r)},stopDragging:()=>{Js(),m(null)},unregisterPanel:A}),[o,L,r,z,C,f,v,_,I,A]),H={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return l.createElement(Je.Provider,{children:l.createElement(p,{children:t,className:n,"data-panel-group-direction":r,"data-panel-group-id":f,style:{...H,...c}}),value:M})}An.displayName="PanelGroup";function Mn({children:e=null,className:t="",disabled:n=!1,id:r=null,style:s={},tagName:i="div"}){const c=l.useRef(null),p=l.useContext(Je);if(p===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{activeHandleId:f,direction:o,groupId:m,registerResizeHandle:b,startDragging:g,stopDragging:d}=p,w=Pt(r),P=f===w,[S,$]=l.useState(!1),[y,x]=l.useState(null),C=l.useCallback(()=>{c.current.blur(),d()},[d]);l.useEffect(()=>{if(n)x(null);else{const _=b(w);x(()=>_)}},[n,w,b]),l.useEffect(()=>{if(n||y==null||!P)return;const _=A=>{y(A)};return document.body.addEventListener("contextmenu",C),document.body.addEventListener("mousemove",_),document.body.addEventListener("touchmove",_),window.addEventListener("mouseup",C),window.addEventListener("touchend",C),()=>{document.body.removeEventListener("contextmenu",C),document.body.removeEventListener("mousemove",_),document.body.removeEventListener("touchmove",_),window.removeEventListener("mouseup",C),window.removeEventListener("touchend",C)}},[o,n,P,y,C]),Ks({disabled:n,handleId:w,resizeHandler:y});const v={cursor:En(o),touchAction:"none",userSelect:"none"};return l.createElement(i,{children:e,className:t,"data-resize-handle-active":P?"pointer":S?"keyboard":void 0,"data-panel-group-direction":o,"data-panel-group-id":m,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":w,onBlur:()=>$(!1),onFocus:()=>$(!0),onMouseDown:_=>g(w,_.nativeEvent),onMouseUp:C,onTouchCancel:C,onTouchEnd:C,onTouchStart:_=>g(w,_.nativeEvent),ref:c,role:"separator",style:{...v,...s},tabIndex:0})}Mn.displayName="PanelResizeHandle";const Xs=({value:e="",onChange:t,mode:n="split"})=>{const[r,s]=l.useState(e);l.useEffect(()=>{s(e),t&&t(e)},[e]);const i=p=>{s(p),t&&t(p)},c=n==="split";return a("div",{className:"md-main",children:h(An,{direction:"horizontal",children:[["md","split"].includes(n)&&a(lt,{children:a(ia,{language:"markdown",value:r,onChange:i})}),c&&a(Mn,{className:"resize-handle"}),["doc","split"].includes(n)&&a(lt,{children:a(vt,{className:"edit-preview",children:r})})]})})};function Qs(e){return a(Bn,{...e,component:()=>a("svg",{className:"chatico",viewBox:"0 0 1024 1024",width:"1em",height:"1em",fill:"currentColor",children:a("path",{d:"M252.068571 906.496h520.283429c89.581714 0 134.144-44.562286 134.144-132.845714V250.331429c0-88.283429-44.562286-132.845714-134.144-132.845715H252.068571c-89.142857 0-134.582857 44.141714-134.582857 132.845715V773.668571c0 88.704 45.44 132.845714 134.582857 132.845715z m1.28-68.992c-42.843429 0-66.852571-22.710857-66.852571-67.291429V253.805714c0-44.580571 24.009143-67.291429 66.852571-67.291428h222.866286v651.008z m517.723429-651.008c42.422857 0 66.432 22.710857 66.432 67.291429V770.194286c0 44.580571-24.009143 67.291429-66.432 67.291428H548.205714V186.496z"})})})}const Zs={0:"split",1:"md",2:"doc"};function ei(){const[e,t]=l.useState(""),[n,r]=l.useState(""),[s,i]=l.useState(0),c=dt(),p=c==null?void 0:c.state;J(async()=>{const m=await xn(p);t(m),r(await X.readTextFile(m))});const f=async m=>{await X.writeTextFile(e,m)},o=()=>{let m=s+1;m>2&&(m=0),i(m)};return h(ee,{children:[h("div",{className:"md-task",children:[h(Ye,{separator:"",children:[a(Ye.Item,{onClick:()=>history.go(-1),children:a(Wt,{})}),a(Ye.Item,{onClick:()=>ge.open(e),children:e})]}),a("div",{children:a(Qs,{onClick:o,style:{fontSize:18,color:"rgba(0,0,0,0.5)"}})})]}),a(Xs,{value:n,onChange:f,mode:Zs[s]})]})}function ti(){const[e]=Ot(),{json:t}=ze(He),[n,r]=l.useState(),[s,i]=l.useState(!1),[c,p]=l.useState("");J(async()=>{const o=await rn.platform(),m=await De(ot),b=await V("get_theme");p(b),i(!(m!=null&&m.titlebar)&&o==="darwin")}),l.useEffect(()=>{if(!t)return;const o=new Map;Array.isArray(t)?(t==null||t.forEach(m=>{m.enable&&(o.has(m.category)||o.set(m.category,[]),o.get(m==null?void 0:m.category).push(m))}),r(Array.from(o)||[])):r([])},[JSON.stringify(t)]);const f=async o=>{await V("wa_window",{label:btoa(o.url).replace(/[^a-zA-Z0-9]/g,""),title:o.title,url:o.url})};return n?(n==null?void 0:n.length)===0?h("div",{className:"dashboard-no-data",children:[h("div",{className:"icon",children:[a(Kn,{style:{fontSize:80,marginBottom:5}}),a("br",{}),"No data"]}),h("div",{className:"txt",children:["Go to ",a("a",{onClick:()=>V("control_window"),children:"Control Center -> Awesome"})," to add data and make sure they are enabled."]})]}):a("div",{className:ut("dashboard",c,{"has-top-dom":s,preview:e.get("type")==="preview"}),children:a("div",{children:n.map(o=>a("div",{className:"group-item",children:a(kt,{title:o[0],size:"small",children:a(In,{className:"list",gutter:[8,8],children:o[1].map((m,b)=>a(Fn,{title:`${m==null?void 0:m.title}: ${m==null?void 0:m.url}`,xl:4,md:6,sm:8,xs:12,children:a(kt,{className:"item",hoverable:!0,onClick:()=>f(m),children:a("span",{children:m==null?void 0:m.title})})},`${b}_${m==null?void 0:m.url}`))})})},o[0]))})}):null}const Dn=[{path:"/settings",element:a(Zr,{}),meta:{label:"Settings",icon:a(Jn,{})}},{path:"/awesome",element:a(ls,{}),meta:{label:"Awesome",icon:a(qn,{})}},{path:"/notes",element:a(zs,{}),meta:{label:"Notes",icon:a(Yn,{})}},{path:"/md/:id",element:a(ei,{}),hideMenu:!0},{path:"/model",meta:{label:"Language Model",icon:a(Xn,{})},children:[{path:"user-custom",element:a(ps,{}),meta:{label:"User Custom",icon:a(Qn,{})}},{path:"sync-prompts",element:a(gs,{}),meta:{label:"Sync Prompts",icon:a(jt,{})}},{path:"sync-custom",element:a(Ss,{}),meta:{label:"Sync Custom",icon:a(Zn,{})}},{path:"sync-custom/:id",element:a($s,{}),hideMenu:!0}]},{path:"/download",element:a(As,{}),meta:{label:"Download",icon:a(ea,{})}},{path:"/about",element:a(ts,{}),meta:{label:"About",icon:a(ta,{})}},{path:"/",element:a(ti,{}),hideMenu:!0}],ni=Dn.filter(e=>!e.hideMenu).map(e=>{var t,n;return{...e.meta,key:e.path||"",children:(n=(t=e==null?void 0:e.children)==null?void 0:t.filter(r=>!r.hideMenu))==null?void 0:n.map(r=>({...r.meta,key:`${e.path}/${r.path}`||""}))}}),Lt=()=>Un(Dn);const{Content:ai,Footer:ri,Sider:si}=nt;function ii(){const[e,t]=l.useState(!1),[n,r]=l.useState(null),[s,i]=l.useState({}),c=dt(),[p,f]=l.useState(c.pathname),o=It();l.useEffect(()=>{c.search==="?type=control"&&o("/settings"),c.search==="?type=preview"&&o("/?type=preview"),f(c.pathname),r(c.pathname==="/")},[c.pathname]),J(async()=>{i({appName:await Gt(),appVersion:await Ht(),appTheme:await V("get_theme")})});const m=async()=>{await V("run_check_update",{silent:!1,hasMsg:!0})},b=s.appTheme==="dark";return n===null?null:a(Wn,{theme:{algorithm:b?Tt.darkAlgorithm:Tt.defaultAlgorithm},children:n?a(Lt,{}):h(nt,{style:{minHeight:"100vh"},hasSider:!0,children:[h(si,{theme:b?"dark":"light",collapsible:!0,collapsed:e,onCollapse:g=>t(g),style:{overflow:"auto",height:"100vh",position:"fixed",left:0,top:0,bottom:0,zIndex:999},children:[a("div",{className:"chat-logo",children:a("img",{src:"/logo.png"})}),h("div",{className:"chat-info",children:[a(j,{children:s.appName}),h(j,{children:[a("span",{style:{marginRight:5},children:s.appVersion}),a(ie,{title:"click to check update",children:a("a",{onClick:m,children:a(jt,{})})})]})]}),a(jn,{selectedKeys:[p],mode:"inline",theme:s.appTheme==="dark"?"dark":"light",inlineIndent:12,items:ni,onClick:g=>o(g.key)})]}),h(nt,{className:"chat-layout",style:{marginLeft:e?80:200,transition:"margin-left 300ms ease-out"},children:[a(ai,{className:"chat-container",style:{overflow:"inherit"},children:a(Lt,{})}),h(ri,{style:{textAlign:"center"},children:[a("a",{href:"https://github.com/lencx/chatgpt",target:"_blank",children:"ChatGPT Desktop Application"})," ","©2022 Created by lencx"]})]})]})})}at.createRoot(document.getElementById("root")).render(a(l.StrictMode,{children:a(l.Suspense,{fallback:null,children:a(Hn,{children:a(ii,{})})})}));
